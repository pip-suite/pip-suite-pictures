{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","../node_modules/async/lib/async.js","../node_modules/process/browser.js","../node_modules/timers-browserify/main.js","src/add_image/AddImage.ts","src/add_image/AddImageOption.ts","src/add_image/AddImageResult.ts","src/avatar/Avatar.ts","src/avatar_edit/AvatarEdit.ts","src/camera_dialog/CameraDialogController.ts","src/camera_dialog/CameraDialogService.ts","src/camera_dialog/index.ts","src/collage/Collage.ts","src/data/Attachment.ts","src/data/AvatarDataService.ts","src/data/BlobInfo.ts","src/data/DataPage.ts","src/data/IAvatarDataService.ts","src/data/IPictureDataService.ts","src/data/Image.ts","src/data/ImageSet.ts","src/data/ImageSetDataService.ts","src/data/PictureDataService.ts","src/data/index.ts","src/gallery_search_dialog/GallerySearchDialogController.ts","src/gallery_search_dialog/GallerySearchDialogService.ts","src/gallery_search_dialog/IGallerySearchDialogService.ts","src/gallery_search_dialog/index.ts","src/index.ts","src/picture/Picture.ts","src/picture_edit/PictureEdit.ts","src/picture_list_edit/PictureListEdit.ts","src/picture_url_dialog/PictureUrlDialogController.ts","src/picture_url_dialog/PictureUrlDialogService.ts","src/picture_url_dialog/index.ts","src/rest/AvatarResources.ts","src/rest/ImageSetResources.ts","src/rest/PictureResources.ts","src/rest/index.ts","src/utilities/IPictureUtils.ts","src/utilities/PicturePaste.ts","src/utilities/PictureUtils.ts","src/utilities/index.ts","temp/pip-suite-pictures-html.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","pictures","r","e","n","t","o","i","c","require","u","a","Error","code","p","call","length","1","previous_async","async","noop","identity","v","toBool","notId","root","only_once","fn","apply","arguments","_once","noConflict","_toString","Object","prototype","toString","_isArray","Array","isArray","obj","_isArrayLike","arr","_arrayEach","iterator","index","_map","result","_range","count","_indexOf","item","_keys","keys","k","hasOwnProperty","push","_keyIterator","coll","len","_restParam","func","startIndex","Math","max","rest","_withoutIndex","value","callback","_setImmediate","setImmediate","_delay","setTimeout","_eachOfLimit","limit","nextKey","done","running","errored","replenish","key","err","doParallel","eachOf","doParallelLimit","doSeries","eachOfSeries","_asyncMap","eachfn","results","_filter","x","sort","b","_reject","cb","_createTester","check","getResult","iteratee","_","_findGetResult","_parallel","tasks","task","args","_concat","y","concat","_queue","worker","concurrency","payload","_insert","q","data","pos","started","idle","drain","unshift","saturated","process","_next","workers","removed","workersList","splice","empty","paused","kill","pause","resume","resumeCount","min","w","_console_fn","name","console","error","_times","mapper","_applyEach","fns","go","that","pop","ensureAsync","innerArgs","sync","nextTick","forEach","each","forEachSeries","eachSeries","forEachLimit","eachLimit","forEachOf","object","iter","completed","forEachOfSeries","iterate","forEachOfLimit","eachOfLimit","map","mapSeries","mapLimit","inject","foldl","reduce","memo","foldr","reduceRight","reversed","reverse","transform","select","filter","selectLimit","filterLimit","selectSeries","filterSeries","reject","rejectLimit","rejectSeries","any","some","someLimit","all","every","everyLimit","detect","detectSeries","detectLimit","sortBy","comparator","left","right","criteria","auto","remainingTasks","runningTasks","hasError","listeners","addListener","taskComplete","slice","dep","taskCallback","safeResults","val","rkey","requires","join","ready","listener","idx","retry","times","attempts","opts","interval","wrappedTask","wrappedCallback","wrappedResults","retryAttempt","finalAttempt","seriesCallback","retryInterval","series","acc","parseInt","parseTimes","waterfall","wrapIterator","next","parallel","parallelLimit","makeCallback","callArgs","concatSeries","whilst","test","doWhilst","calls","until","doUntil","during","truth","doDuring","queue","items","priorityQueue","_compareTasks","priority","sequence","compare","beg","end","mid","_binarySearch","cargo","log","dir","memoize","hasher","queues","has","memoized","l","unmemoized","unmemoize","timesSeries","timesLimit","seq","newargs","nextargs","compose","applyEach","applyEachSeries","forever","constant","values","wrapSync","asyncify","type","then","message","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","array","title","browser","env","argv","version","versions","on","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","umask","Function","immediateIds","nextImmediateId","Timeout","id","clearFn","_id","_clearFn","setInterval","clearInterval","close","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","ConfigTranslations","pipTranslateProvider","translations","FILE","WEB_LINK","CAMERA","IMAGE_GALLERY","AddImageOption_1","$inject","AddImageController_1","openMenu","$mdOpenMenu","$scope","ngDisabled","toBoolean","toLowerCase","isMulti","undefined","multi","angular","isFunction","hideMenu","$mdMenu","hide","dataURItoBlob","dataURI","byteString","split","indexOf","atob","unescape","mimeString","ia","Uint8Array","charCodeAt","Blob","addImages","images","_this","img","onChange","$images","onFileChange","$files","file","$timeout","fileReader","FileReader","readAsDataURL","onload","url","uriData","target","picture","onWebLinkClick","pipPictureUrlDialog","show","blob","substring","lastIndexOf","onCameraClick","pipCameraDialog","onGalleryClick","pipGallerySearchDialog","multiple","imgs_1","$element","defaultOption","AddImageOption","option","assign","config","transclude","templateUrl","controller","controllerAs","defineProperty","Upload","WebLink","Camera","Galery","AddImageResult","IAvatarDataService_1","AvatarEdit_1","AvatarComponent","bindings","pipId","pipUrl","pipName","ngClass","pipRebindAvatar","pipRebind","template","$postLink","imageElement","children","defaultAvatarElement","find","load","$event","image","$","pipPictureUtils","setImageMarginCSS","showAvatarByName","bindControl","postLink","$onChanges","changes","currentValue","previousValue","isDataChange","refreshAvatar","colorClassIndex","pipCodes","hash","colors","removeAttr","addClass","colorClasses","css","pipAvatarData","ShowOnlyNameIcon","attr","cleanupAvatarUpdated","$rootScope","$on","initial","charAt","DefaultInitial","getAvatarUrl","AvatarController","$log","$http","ReloadAvatar","../avatar_edit/AvatarEdit","../data/IAvatarDataService","8","PicturePaste_1","disabled","progress","uploaded","uploading","upload","loaded","state","AvatarStates","Original","AvatarEditControl","Changed","Deleted","PICTURE_EDIT_TEXT","PICTURE_ERROR_LOAD","AvatarEditComponent","pipCreated","pipChanged","pipReset","text","icon","controlElement","inputElement","focus","pipPicturePaste","addPasteListener","readItemLocally","blur","removePasteListener","$control","control","reset","isReset","afterDeleting","saveAvatar","successCallback","errorCallback","FormData","fd","lengthComputable","total","headers","Content-Type","success","response","$broadcast","deletePicture","deleteAvatar","save","isUpdated","onDeleteClick","stopPropagation","onKeyDown","keyCode","trigger","onImageError","$apply","setErrorImageCSS","width","height","onImageLoad","container","clientWidth","clientHeight","AvatarEditController","pipFileUpload","pipRest","PicturePaste","errorText","multiUpload","ConfigAvatarEditTranslations","component","../utilities/PicturePaste","9","ConfigCameraDialogTranslations","TAKE_PICTURE","WEB_CAM_ERROR","onInit","Webcam","init","attach","webCamError","set","dest_width","dest_height","crop_width","crop_height","image_format","jpeg_quality","setSWFLocation","document","addEventListener","onDeviceReady","navigator","camera","getPicture","onSuccess","onFail","sourceType","PictureSourceType","correctOrientation","quality","targetWidth","destinationType","DestinationType","DATA_URL","CameraDialogController","imageData","$mdDialog","onTakePictureClick","freeze","snap","dataUri","onResetPicture","unfreeze","onCancelClick","cancel","pipSystemInfo","theme","themes","ThemeRootVar","os","10","cancelCallback","_mdDialog","clickOutsideToClose","CameraDialogService","service","11","./CameraDialogService","./ICameraDialogService","13","pipPictureIds","pipSrcs","pipPictures","uniqueCode","allowOpen","getElementDimensions","h","$watch","newValue","oldValue","debounceCalculateResize","generateContent","isChanged","isEqual","calculateResize","ims","element","parentElement","icns","icn","setIconMarginCSS","CollageController","parent","defaultBlock","defaultIcon","append","svgData","getScheme","schemes","collageSchemes","getImageUrls","clone","pipPictureData","getPictureUrl","uri","generatePicture","urls","scheme","containerClasses","pictureClasses","fullWidth","fullHeight","flex","leftPadding","rightPadding","topPadding","bottomPadding","generatePictureGroup","classes","layout","generate","group","unbind","html","partialUrls","bind","event","getCollageSchemes","resized","debounce","CollageComponent","14","Attachment","15","AvatarData","enumerable","configurable","get","_config","serverUrl","AvatarRoute","postAvatarUrl","params","AvatarFieldId","getResource","AvatarResource","remove","createAvatar","progressCallback","AvatarDataProvider","pipRestProvider","registerOperation","$get","_service","AvatarConfig","16","BlobInfo","size","content_type","create_time","expire_time","17","DataPage","18","19","PictureConfig","Image","22","pics","ImageSet","ImageSetData","readImageSets","RESOURCE","page","readImageSet","imagesets_id","updateImageSet","update","deleteImageSet","pipFormat","24","PictureData","PictureRoute","ShowErrorIcon","DefaultErrorIcon","postPictureUrl","readPictures","filer","filterToString","readPictureInfo","RESOURCE_INFO","readPicture","picture_id","PictureDataProvider","provider","./IPictureDataService","25","__export","m","./Attachment","./AvatarDataService","./BlobInfo","./DataPage","./IAvatarDataService","./IImageSetDataService","./Image","./ImageSet","./ImageSetDataService","./PictureDataService","26","extendStatics","__extends","setPrototypeOf","__proto__","d","__","constructor","create","ConfigGallerySearchDialogTranslations","SEARCH_PICTURES","IMAGE_START_SEARCH","IGallerySearchDialogService_1","_super","GallerySearchDialogParams","GallerySearchDialogController","onSearchClick","busy","search","prevSearch","transaction","begin","pipImageSetData","Search","aborted","transactionId","newImage","checked","thumbnail","imagesSearchResult","onStopSearchClick","abort","onKeyPress","onImageClick","onAddClick","addButtonDisabled","pipTransaction","focusSearchText","27","GallerySearchDialogService","locals","28","./GallerySearchDialogController","./GallerySearchDialogService","./IGallerySearchDialogService","30","./add_image/AddImageOption","./add_image/AddImageResult","./avatar/Avatar","./avatar_edit/AvatarEdit","./camera_dialog","./collage/Collage","./data","./gallery_search_dialog","./picture/Picture","./picture_edit/PictureEdit","./picture_list_edit/PictureListEdit","./picture_url_dialog","./rest","./utilities","31","PictureComponent","PictureController","src","pictureId","pipPicture","32","PictureEditControl","PictureStates","Copied","ConfigPictureEditTranslations","ERROR_WRONG_IMAGE_FILE","PictureEditComponent","sender","change","pipPictureId","resetImage","pictureStartState","onFocus","onBlur","savePicture","saveImage","PictureEditController","pipAddedPicture","33","PictureListEditItem","PictureListEditControl","Added","PictureListEditStates","PictureUploadErrors","ConfigPictureListEditTranslations","PICTURE_LIST_EDIT_TEXT","ERROR_TRANSACTION_IN_PROGRESS","ERROR_IMAGE_PRELOADING","PictureListEditComponent","PictureListEditController","filterItem","removeItem","findIndex","pin","getItems","newItem","itemPin","setItems","newPic","addItem","oldItem","fileInfo","itemIndex","deleteItem","cancelQuery","addedBlobCollection","addedUrlCollection","deletedCollection","callbackAll","res","errors","getUploadErors","resolve","onSelectClick","34","PICTURE_FROM_WEBLINK","LINK_PICTURE","setImageSize","imageWidth","cssParams","PictureUrlDialogController","checkUrl","invalid","ConfigPictureUrlDialogTranslations","36","PictureUrlDialogService","./IPictureUrlDialogService","./PictureUrlDialogController","./PictureUrlDialogService","38","configAvatarResources","39","configImageSetResources","40","method","registerResource","configPictureResources","./ImageSetResources","./PictureResources","42","imageCssParams","onPaste","pasteCatcher","createElement","setAttribute","overflow","appendChild","localEvent","originalEvent","clipboardData","getAsFile","files","body","removeChild","margin-left","margin-top","containerWidth","containerHeight","naturalWidth","imageHeight","naturalHeight","margin","iconSize","PictureUtils","PictureUtilsProvider","45","./IPictureUtils","./PicturePaste","./PictureUtils","46","$templateCache","put"],"mappings":"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","file":"pip-suite-pictures.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*!\n * async\n * https://github.com/caolan/async\n *\n * Copyright 2010-2014 Caolan McMahon\n * Released under the MIT license\n */\n(function () {\n\n    var async = {};\n    function noop() {}\n    function identity(v) {\n        return v;\n    }\n    function toBool(v) {\n        return !!v;\n    }\n    function notId(v) {\n        return !v;\n    }\n\n    // global on the server, window in the browser\n    var previous_async;\n\n    // Establish the root object, `window` (`self`) in the browser, `global`\n    // on the server, or `this` in some virtual machines. We use `self`\n    // instead of `window` for `WebWorker` support.\n    var root = typeof self === 'object' && self.self === self && self ||\n            typeof global === 'object' && global.global === global && global ||\n            this;\n\n    if (root != null) {\n        previous_async = root.async;\n    }\n\n    async.noConflict = function () {\n        root.async = previous_async;\n        return async;\n    };\n\n    function only_once(fn) {\n        return function() {\n            if (fn === null) throw new Error(\"Callback was already called.\");\n            fn.apply(this, arguments);\n            fn = null;\n        };\n    }\n\n    function _once(fn) {\n        return function() {\n            if (fn === null) return;\n            fn.apply(this, arguments);\n            fn = null;\n        };\n    }\n\n    //// cross-browser compatiblity functions ////\n\n    var _toString = Object.prototype.toString;\n\n    var _isArray = Array.isArray || function (obj) {\n        return _toString.call(obj) === '[object Array]';\n    };\n\n    // Ported from underscore.js isObject\n    var _isObject = function(obj) {\n        var type = typeof obj;\n        return type === 'function' || type === 'object' && !!obj;\n    };\n\n    function _isArrayLike(arr) {\n        return _isArray(arr) || (\n            // has a positive integer length property\n            typeof arr.length === \"number\" &&\n            arr.length >= 0 &&\n            arr.length % 1 === 0\n        );\n    }\n\n    function _arrayEach(arr, iterator) {\n        var index = -1,\n            length = arr.length;\n\n        while (++index < length) {\n            iterator(arr[index], index, arr);\n        }\n    }\n\n    function _map(arr, iterator) {\n        var index = -1,\n            length = arr.length,\n            result = Array(length);\n\n        while (++index < length) {\n            result[index] = iterator(arr[index], index, arr);\n        }\n        return result;\n    }\n\n    function _range(count) {\n        return _map(Array(count), function (v, i) { return i; });\n    }\n\n    function _reduce(arr, iterator, memo) {\n        _arrayEach(arr, function (x, i, a) {\n            memo = iterator(memo, x, i, a);\n        });\n        return memo;\n    }\n\n    function _forEachOf(object, iterator) {\n        _arrayEach(_keys(object), function (key) {\n            iterator(object[key], key);\n        });\n    }\n\n    function _indexOf(arr, item) {\n        for (var i = 0; i < arr.length; i++) {\n            if (arr[i] === item) return i;\n        }\n        return -1;\n    }\n\n    var _keys = Object.keys || function (obj) {\n        var keys = [];\n        for (var k in obj) {\n            if (obj.hasOwnProperty(k)) {\n                keys.push(k);\n            }\n        }\n        return keys;\n    };\n\n    function _keyIterator(coll) {\n        var i = -1;\n        var len;\n        var keys;\n        if (_isArrayLike(coll)) {\n            len = coll.length;\n            return function next() {\n                i++;\n                return i < len ? i : null;\n            };\n        } else {\n            keys = _keys(coll);\n            len = keys.length;\n            return function next() {\n                i++;\n                return i < len ? keys[i] : null;\n            };\n        }\n    }\n\n    // Similar to ES6's rest param (http://ariya.ofilabs.com/2013/03/es6-and-rest-parameter.html)\n    // This accumulates the arguments passed into an array, after a given index.\n    // From underscore.js (https://github.com/jashkenas/underscore/pull/2140).\n    function _restParam(func, startIndex) {\n        startIndex = startIndex == null ? func.length - 1 : +startIndex;\n        return function() {\n            var length = Math.max(arguments.length - startIndex, 0);\n            var rest = Array(length);\n            for (var index = 0; index < length; index++) {\n                rest[index] = arguments[index + startIndex];\n            }\n            switch (startIndex) {\n                case 0: return func.call(this, rest);\n                case 1: return func.call(this, arguments[0], rest);\n            }\n            // Currently unused but handle cases outside of the switch statement:\n            // var args = Array(startIndex + 1);\n            // for (index = 0; index < startIndex; index++) {\n            //     args[index] = arguments[index];\n            // }\n            // args[startIndex] = rest;\n            // return func.apply(this, args);\n        };\n    }\n\n    function _withoutIndex(iterator) {\n        return function (value, index, callback) {\n            return iterator(value, callback);\n        };\n    }\n\n    //// exported async module functions ////\n\n    //// nextTick implementation with browser-compatible fallback ////\n\n    // capture the global reference to guard against fakeTimer mocks\n    var _setImmediate = typeof setImmediate === 'function' && setImmediate;\n\n    var _delay = _setImmediate ? function(fn) {\n        // not a direct alias for IE10 compatibility\n        _setImmediate(fn);\n    } : function(fn) {\n        setTimeout(fn, 0);\n    };\n\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\n        async.nextTick = process.nextTick;\n    } else {\n        async.nextTick = _delay;\n    }\n    async.setImmediate = _setImmediate ? _delay : async.nextTick;\n\n\n    async.forEach =\n    async.each = function (arr, iterator, callback) {\n        return async.eachOf(arr, _withoutIndex(iterator), callback);\n    };\n\n    async.forEachSeries =\n    async.eachSeries = function (arr, iterator, callback) {\n        return async.eachOfSeries(arr, _withoutIndex(iterator), callback);\n    };\n\n\n    async.forEachLimit =\n    async.eachLimit = function (arr, limit, iterator, callback) {\n        return _eachOfLimit(limit)(arr, _withoutIndex(iterator), callback);\n    };\n\n    async.forEachOf =\n    async.eachOf = function (object, iterator, callback) {\n        callback = _once(callback || noop);\n        object = object || [];\n\n        var iter = _keyIterator(object);\n        var key, completed = 0;\n\n        while ((key = iter()) != null) {\n            completed += 1;\n            iterator(object[key], key, only_once(done));\n        }\n\n        if (completed === 0) callback(null);\n\n        function done(err) {\n            completed--;\n            if (err) {\n                callback(err);\n            }\n            // Check key is null in case iterator isn't exhausted\n            // and done resolved synchronously.\n            else if (key === null && completed <= 0) {\n                callback(null);\n            }\n        }\n    };\n\n    async.forEachOfSeries =\n    async.eachOfSeries = function (obj, iterator, callback) {\n        callback = _once(callback || noop);\n        obj = obj || [];\n        var nextKey = _keyIterator(obj);\n        var key = nextKey();\n        function iterate() {\n            var sync = true;\n            if (key === null) {\n                return callback(null);\n            }\n            iterator(obj[key], key, only_once(function (err) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    key = nextKey();\n                    if (key === null) {\n                        return callback(null);\n                    } else {\n                        if (sync) {\n                            async.setImmediate(iterate);\n                        } else {\n                            iterate();\n                        }\n                    }\n                }\n            }));\n            sync = false;\n        }\n        iterate();\n    };\n\n\n\n    async.forEachOfLimit =\n    async.eachOfLimit = function (obj, limit, iterator, callback) {\n        _eachOfLimit(limit)(obj, iterator, callback);\n    };\n\n    function _eachOfLimit(limit) {\n\n        return function (obj, iterator, callback) {\n            callback = _once(callback || noop);\n            obj = obj || [];\n            var nextKey = _keyIterator(obj);\n            if (limit <= 0) {\n                return callback(null);\n            }\n            var done = false;\n            var running = 0;\n            var errored = false;\n\n            (function replenish () {\n                if (done && running <= 0) {\n                    return callback(null);\n                }\n\n                while (running < limit && !errored) {\n                    var key = nextKey();\n                    if (key === null) {\n                        done = true;\n                        if (running <= 0) {\n                            callback(null);\n                        }\n                        return;\n                    }\n                    running += 1;\n                    iterator(obj[key], key, only_once(function (err) {\n                        running -= 1;\n                        if (err) {\n                            callback(err);\n                            errored = true;\n                        }\n                        else {\n                            replenish();\n                        }\n                    }));\n                }\n            })();\n        };\n    }\n\n\n    function doParallel(fn) {\n        return function (obj, iterator, callback) {\n            return fn(async.eachOf, obj, iterator, callback);\n        };\n    }\n    function doParallelLimit(fn) {\n        return function (obj, limit, iterator, callback) {\n            return fn(_eachOfLimit(limit), obj, iterator, callback);\n        };\n    }\n    function doSeries(fn) {\n        return function (obj, iterator, callback) {\n            return fn(async.eachOfSeries, obj, iterator, callback);\n        };\n    }\n\n    function _asyncMap(eachfn, arr, iterator, callback) {\n        callback = _once(callback || noop);\n        arr = arr || [];\n        var results = _isArrayLike(arr) ? [] : {};\n        eachfn(arr, function (value, index, callback) {\n            iterator(value, function (err, v) {\n                results[index] = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, results);\n        });\n    }\n\n    async.map = doParallel(_asyncMap);\n    async.mapSeries = doSeries(_asyncMap);\n    async.mapLimit = doParallelLimit(_asyncMap);\n\n    // reduce only has a series version, as doing reduce in parallel won't\n    // work in many situations.\n    async.inject =\n    async.foldl =\n    async.reduce = function (arr, memo, iterator, callback) {\n        async.eachOfSeries(arr, function (x, i, callback) {\n            iterator(memo, x, function (err, v) {\n                memo = v;\n                callback(err);\n            });\n        }, function (err) {\n            callback(err, memo);\n        });\n    };\n\n    async.foldr =\n    async.reduceRight = function (arr, memo, iterator, callback) {\n        var reversed = _map(arr, identity).reverse();\n        async.reduce(reversed, memo, iterator, callback);\n    };\n\n    async.transform = function (arr, memo, iterator, callback) {\n        if (arguments.length === 3) {\n            callback = iterator;\n            iterator = memo;\n            memo = _isArray(arr) ? [] : {};\n        }\n\n        async.eachOf(arr, function(v, k, cb) {\n            iterator(memo, v, k, cb);\n        }, function(err) {\n            callback(err, memo);\n        });\n    };\n\n    function _filter(eachfn, arr, iterator, callback) {\n        var results = [];\n        eachfn(arr, function (x, index, callback) {\n            iterator(x, function (v) {\n                if (v) {\n                    results.push({index: index, value: x});\n                }\n                callback();\n            });\n        }, function () {\n            callback(_map(results.sort(function (a, b) {\n                return a.index - b.index;\n            }), function (x) {\n                return x.value;\n            }));\n        });\n    }\n\n    async.select =\n    async.filter = doParallel(_filter);\n\n    async.selectLimit =\n    async.filterLimit = doParallelLimit(_filter);\n\n    async.selectSeries =\n    async.filterSeries = doSeries(_filter);\n\n    function _reject(eachfn, arr, iterator, callback) {\n        _filter(eachfn, arr, function(value, cb) {\n            iterator(value, function(v) {\n                cb(!v);\n            });\n        }, callback);\n    }\n    async.reject = doParallel(_reject);\n    async.rejectLimit = doParallelLimit(_reject);\n    async.rejectSeries = doSeries(_reject);\n\n    function _createTester(eachfn, check, getResult) {\n        return function(arr, limit, iterator, cb) {\n            function done() {\n                if (cb) cb(getResult(false, void 0));\n            }\n            function iteratee(x, _, callback) {\n                if (!cb) return callback();\n                iterator(x, function (v) {\n                    if (cb && check(v)) {\n                        cb(getResult(true, x));\n                        cb = iterator = false;\n                    }\n                    callback();\n                });\n            }\n            if (arguments.length > 3) {\n                eachfn(arr, limit, iteratee, done);\n            } else {\n                cb = iterator;\n                iterator = limit;\n                eachfn(arr, iteratee, done);\n            }\n        };\n    }\n\n    async.any =\n    async.some = _createTester(async.eachOf, toBool, identity);\n\n    async.someLimit = _createTester(async.eachOfLimit, toBool, identity);\n\n    async.all =\n    async.every = _createTester(async.eachOf, notId, notId);\n\n    async.everyLimit = _createTester(async.eachOfLimit, notId, notId);\n\n    function _findGetResult(v, x) {\n        return x;\n    }\n    async.detect = _createTester(async.eachOf, identity, _findGetResult);\n    async.detectSeries = _createTester(async.eachOfSeries, identity, _findGetResult);\n    async.detectLimit = _createTester(async.eachOfLimit, identity, _findGetResult);\n\n    async.sortBy = function (arr, iterator, callback) {\n        async.map(arr, function (x, callback) {\n            iterator(x, function (err, criteria) {\n                if (err) {\n                    callback(err);\n                }\n                else {\n                    callback(null, {value: x, criteria: criteria});\n                }\n            });\n        }, function (err, results) {\n            if (err) {\n                return callback(err);\n            }\n            else {\n                callback(null, _map(results.sort(comparator), function (x) {\n                    return x.value;\n                }));\n            }\n\n        });\n\n        function comparator(left, right) {\n            var a = left.criteria, b = right.criteria;\n            return a < b ? -1 : a > b ? 1 : 0;\n        }\n    };\n\n    async.auto = function (tasks, concurrency, callback) {\n        if (typeof arguments[1] === 'function') {\n            // concurrency is optional, shift the args.\n            callback = concurrency;\n            concurrency = null;\n        }\n        callback = _once(callback || noop);\n        var keys = _keys(tasks);\n        var remainingTasks = keys.length;\n        if (!remainingTasks) {\n            return callback(null);\n        }\n        if (!concurrency) {\n            concurrency = remainingTasks;\n        }\n\n        var results = {};\n        var runningTasks = 0;\n\n        var hasError = false;\n\n        var listeners = [];\n        function addListener(fn) {\n            listeners.unshift(fn);\n        }\n        function removeListener(fn) {\n            var idx = _indexOf(listeners, fn);\n            if (idx >= 0) listeners.splice(idx, 1);\n        }\n        function taskComplete() {\n            remainingTasks--;\n            _arrayEach(listeners.slice(0), function (fn) {\n                fn();\n            });\n        }\n\n        addListener(function () {\n            if (!remainingTasks) {\n                callback(null, results);\n            }\n        });\n\n        _arrayEach(keys, function (k) {\n            if (hasError) return;\n            var task = _isArray(tasks[k]) ? tasks[k]: [tasks[k]];\n            var taskCallback = _restParam(function(err, args) {\n                runningTasks--;\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                if (err) {\n                    var safeResults = {};\n                    _forEachOf(results, function(val, rkey) {\n                        safeResults[rkey] = val;\n                    });\n                    safeResults[k] = args;\n                    hasError = true;\n\n                    callback(err, safeResults);\n                }\n                else {\n                    results[k] = args;\n                    async.setImmediate(taskComplete);\n                }\n            });\n            var requires = task.slice(0, task.length - 1);\n            // prevent dead-locks\n            var len = requires.length;\n            var dep;\n            while (len--) {\n                if (!(dep = tasks[requires[len]])) {\n                    throw new Error('Has nonexistent dependency in ' + requires.join(', '));\n                }\n                if (_isArray(dep) && _indexOf(dep, k) >= 0) {\n                    throw new Error('Has cyclic dependencies');\n                }\n            }\n            function ready() {\n                return runningTasks < concurrency && _reduce(requires, function (a, x) {\n                    return (a && results.hasOwnProperty(x));\n                }, true) && !results.hasOwnProperty(k);\n            }\n            if (ready()) {\n                runningTasks++;\n                task[task.length - 1](taskCallback, results);\n            }\n            else {\n                addListener(listener);\n            }\n            function listener() {\n                if (ready()) {\n                    runningTasks++;\n                    removeListener(listener);\n                    task[task.length - 1](taskCallback, results);\n                }\n            }\n        });\n    };\n\n\n\n    async.retry = function(times, task, callback) {\n        var DEFAULT_TIMES = 5;\n        var DEFAULT_INTERVAL = 0;\n\n        var attempts = [];\n\n        var opts = {\n            times: DEFAULT_TIMES,\n            interval: DEFAULT_INTERVAL\n        };\n\n        function parseTimes(acc, t){\n            if(typeof t === 'number'){\n                acc.times = parseInt(t, 10) || DEFAULT_TIMES;\n            } else if(typeof t === 'object'){\n                acc.times = parseInt(t.times, 10) || DEFAULT_TIMES;\n                acc.interval = parseInt(t.interval, 10) || DEFAULT_INTERVAL;\n            } else {\n                throw new Error('Unsupported argument type for \\'times\\': ' + typeof t);\n            }\n        }\n\n        var length = arguments.length;\n        if (length < 1 || length > 3) {\n            throw new Error('Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)');\n        } else if (length <= 2 && typeof times === 'function') {\n            callback = task;\n            task = times;\n        }\n        if (typeof times !== 'function') {\n            parseTimes(opts, times);\n        }\n        opts.callback = callback;\n        opts.task = task;\n\n        function wrappedTask(wrappedCallback, wrappedResults) {\n            function retryAttempt(task, finalAttempt) {\n                return function(seriesCallback) {\n                    task(function(err, result){\n                        seriesCallback(!err || finalAttempt, {err: err, result: result});\n                    }, wrappedResults);\n                };\n            }\n\n            function retryInterval(interval){\n                return function(seriesCallback){\n                    setTimeout(function(){\n                        seriesCallback(null);\n                    }, interval);\n                };\n            }\n\n            while (opts.times) {\n\n                var finalAttempt = !(opts.times-=1);\n                attempts.push(retryAttempt(opts.task, finalAttempt));\n                if(!finalAttempt && opts.interval > 0){\n                    attempts.push(retryInterval(opts.interval));\n                }\n            }\n\n            async.series(attempts, function(done, data){\n                data = data[data.length - 1];\n                (wrappedCallback || opts.callback)(data.err, data.result);\n            });\n        }\n\n        // If a callback is passed, run this as a controll flow\n        return opts.callback ? wrappedTask() : wrappedTask;\n    };\n\n    async.waterfall = function (tasks, callback) {\n        callback = _once(callback || noop);\n        if (!_isArray(tasks)) {\n            var err = new Error('First argument to waterfall must be an array of functions');\n            return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        function wrapIterator(iterator) {\n            return _restParam(function (err, args) {\n                if (err) {\n                    callback.apply(null, [err].concat(args));\n                }\n                else {\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    ensureAsync(iterator).apply(null, args);\n                }\n            });\n        }\n        wrapIterator(async.iterator(tasks))();\n    };\n\n    function _parallel(eachfn, tasks, callback) {\n        callback = callback || noop;\n        var results = _isArrayLike(tasks) ? [] : {};\n\n        eachfn(tasks, function (task, key, callback) {\n            task(_restParam(function (err, args) {\n                if (args.length <= 1) {\n                    args = args[0];\n                }\n                results[key] = args;\n                callback(err);\n            }));\n        }, function (err) {\n            callback(err, results);\n        });\n    }\n\n    async.parallel = function (tasks, callback) {\n        _parallel(async.eachOf, tasks, callback);\n    };\n\n    async.parallelLimit = function(tasks, limit, callback) {\n        _parallel(_eachOfLimit(limit), tasks, callback);\n    };\n\n    async.series = function(tasks, callback) {\n        _parallel(async.eachOfSeries, tasks, callback);\n    };\n\n    async.iterator = function (tasks) {\n        function makeCallback(index) {\n            function fn() {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            }\n            fn.next = function () {\n                return (index < tasks.length - 1) ? makeCallback(index + 1): null;\n            };\n            return fn;\n        }\n        return makeCallback(0);\n    };\n\n    async.apply = _restParam(function (fn, args) {\n        return _restParam(function (callArgs) {\n            return fn.apply(\n                null, args.concat(callArgs)\n            );\n        });\n    });\n\n    function _concat(eachfn, arr, fn, callback) {\n        var result = [];\n        eachfn(arr, function (x, index, cb) {\n            fn(x, function (err, y) {\n                result = result.concat(y || []);\n                cb(err);\n            });\n        }, function (err) {\n            callback(err, result);\n        });\n    }\n    async.concat = doParallel(_concat);\n    async.concatSeries = doSeries(_concat);\n\n    async.whilst = function (test, iterator, callback) {\n        callback = callback || noop;\n        if (test()) {\n            var next = _restParam(function(err, args) {\n                if (err) {\n                    callback(err);\n                } else if (test.apply(this, args)) {\n                    iterator(next);\n                } else {\n                    callback.apply(null, [null].concat(args));\n                }\n            });\n            iterator(next);\n        } else {\n            callback(null);\n        }\n    };\n\n    async.doWhilst = function (iterator, test, callback) {\n        var calls = 0;\n        return async.whilst(function() {\n            return ++calls <= 1 || test.apply(this, arguments);\n        }, iterator, callback);\n    };\n\n    async.until = function (test, iterator, callback) {\n        return async.whilst(function() {\n            return !test.apply(this, arguments);\n        }, iterator, callback);\n    };\n\n    async.doUntil = function (iterator, test, callback) {\n        return async.doWhilst(iterator, function() {\n            return !test.apply(this, arguments);\n        }, callback);\n    };\n\n    async.during = function (test, iterator, callback) {\n        callback = callback || noop;\n\n        var next = _restParam(function(err, args) {\n            if (err) {\n                callback(err);\n            } else {\n                args.push(check);\n                test.apply(this, args);\n            }\n        });\n\n        var check = function(err, truth) {\n            if (err) {\n                callback(err);\n            } else if (truth) {\n                iterator(next);\n            } else {\n                callback(null);\n            }\n        };\n\n        test(check);\n    };\n\n    async.doDuring = function (iterator, test, callback) {\n        var calls = 0;\n        async.during(function(next) {\n            if (calls++ < 1) {\n                next(null, true);\n            } else {\n                test.apply(this, arguments);\n            }\n        }, iterator, callback);\n    };\n\n    function _queue(worker, concurrency, payload) {\n        if (concurrency == null) {\n            concurrency = 1;\n        }\n        else if(concurrency === 0) {\n            throw new Error('Concurrency must not be zero');\n        }\n        function _insert(q, data, pos, callback) {\n            if (callback != null && typeof callback !== \"function\") {\n                throw new Error(\"task callback must be a function\");\n            }\n            q.started = true;\n            if (!_isArray(data)) {\n                data = [data];\n            }\n            if(data.length === 0 && q.idle()) {\n                // call drain immediately if there are no tasks\n                return async.setImmediate(function() {\n                    q.drain();\n                });\n            }\n            _arrayEach(data, function(task) {\n                var item = {\n                    data: task,\n                    callback: callback || noop\n                };\n\n                if (pos) {\n                    q.tasks.unshift(item);\n                } else {\n                    q.tasks.push(item);\n                }\n\n                if (q.tasks.length === q.concurrency) {\n                    q.saturated();\n                }\n            });\n            async.setImmediate(q.process);\n        }\n        function _next(q, tasks) {\n            return function(){\n                workers -= 1;\n\n                var removed = false;\n                var args = arguments;\n                _arrayEach(tasks, function (task) {\n                    _arrayEach(workersList, function (worker, index) {\n                        if (worker === task && !removed) {\n                            workersList.splice(index, 1);\n                            removed = true;\n                        }\n                    });\n\n                    task.callback.apply(task, args);\n                });\n                if (q.tasks.length + workers === 0) {\n                    q.drain();\n                }\n                q.process();\n            };\n        }\n\n        var workers = 0;\n        var workersList = [];\n        var q = {\n            tasks: [],\n            concurrency: concurrency,\n            payload: payload,\n            saturated: noop,\n            empty: noop,\n            drain: noop,\n            started: false,\n            paused: false,\n            push: function (data, callback) {\n                _insert(q, data, false, callback);\n            },\n            kill: function () {\n                q.drain = noop;\n                q.tasks = [];\n            },\n            unshift: function (data, callback) {\n                _insert(q, data, true, callback);\n            },\n            process: function () {\n                while(!q.paused && workers < q.concurrency && q.tasks.length){\n\n                    var tasks = q.payload ?\n                        q.tasks.splice(0, q.payload) :\n                        q.tasks.splice(0, q.tasks.length);\n\n                    var data = _map(tasks, function (task) {\n                        return task.data;\n                    });\n\n                    if (q.tasks.length === 0) {\n                        q.empty();\n                    }\n                    workers += 1;\n                    workersList.push(tasks[0]);\n                    var cb = only_once(_next(q, tasks));\n                    worker(data, cb);\n                }\n            },\n            length: function () {\n                return q.tasks.length;\n            },\n            running: function () {\n                return workers;\n            },\n            workersList: function () {\n                return workersList;\n            },\n            idle: function() {\n                return q.tasks.length + workers === 0;\n            },\n            pause: function () {\n                q.paused = true;\n            },\n            resume: function () {\n                if (q.paused === false) { return; }\n                q.paused = false;\n                var resumeCount = Math.min(q.concurrency, q.tasks.length);\n                // Need to call q.process once per concurrent\n                // worker to preserve full concurrency after pause\n                for (var w = 1; w <= resumeCount; w++) {\n                    async.setImmediate(q.process);\n                }\n            }\n        };\n        return q;\n    }\n\n    async.queue = function (worker, concurrency) {\n        var q = _queue(function (items, cb) {\n            worker(items[0], cb);\n        }, concurrency, 1);\n\n        return q;\n    };\n\n    async.priorityQueue = function (worker, concurrency) {\n\n        function _compareTasks(a, b){\n            return a.priority - b.priority;\n        }\n\n        function _binarySearch(sequence, item, compare) {\n            var beg = -1,\n                end = sequence.length - 1;\n            while (beg < end) {\n                var mid = beg + ((end - beg + 1) >>> 1);\n                if (compare(item, sequence[mid]) >= 0) {\n                    beg = mid;\n                } else {\n                    end = mid - 1;\n                }\n            }\n            return beg;\n        }\n\n        function _insert(q, data, priority, callback) {\n            if (callback != null && typeof callback !== \"function\") {\n                throw new Error(\"task callback must be a function\");\n            }\n            q.started = true;\n            if (!_isArray(data)) {\n                data = [data];\n            }\n            if(data.length === 0) {\n                // call drain immediately if there are no tasks\n                return async.setImmediate(function() {\n                    q.drain();\n                });\n            }\n            _arrayEach(data, function(task) {\n                var item = {\n                    data: task,\n                    priority: priority,\n                    callback: typeof callback === 'function' ? callback : noop\n                };\n\n                q.tasks.splice(_binarySearch(q.tasks, item, _compareTasks) + 1, 0, item);\n\n                if (q.tasks.length === q.concurrency) {\n                    q.saturated();\n                }\n                async.setImmediate(q.process);\n            });\n        }\n\n        // Start with a normal queue\n        var q = async.queue(worker, concurrency);\n\n        // Override push to accept second parameter representing priority\n        q.push = function (data, priority, callback) {\n            _insert(q, data, priority, callback);\n        };\n\n        // Remove unshift function\n        delete q.unshift;\n\n        return q;\n    };\n\n    async.cargo = function (worker, payload) {\n        return _queue(worker, 1, payload);\n    };\n\n    function _console_fn(name) {\n        return _restParam(function (fn, args) {\n            fn.apply(null, args.concat([_restParam(function (err, args) {\n                if (typeof console === 'object') {\n                    if (err) {\n                        if (console.error) {\n                            console.error(err);\n                        }\n                    }\n                    else if (console[name]) {\n                        _arrayEach(args, function (x) {\n                            console[name](x);\n                        });\n                    }\n                }\n            })]));\n        });\n    }\n    async.log = _console_fn('log');\n    async.dir = _console_fn('dir');\n    /*async.info = _console_fn('info');\n    async.warn = _console_fn('warn');\n    async.error = _console_fn('error');*/\n\n    async.memoize = function (fn, hasher) {\n        var memo = {};\n        var queues = {};\n        var has = Object.prototype.hasOwnProperty;\n        hasher = hasher || identity;\n        var memoized = _restParam(function memoized(args) {\n            var callback = args.pop();\n            var key = hasher.apply(null, args);\n            if (has.call(memo, key)) {   \n                async.setImmediate(function () {\n                    callback.apply(null, memo[key]);\n                });\n            }\n            else if (has.call(queues, key)) {\n                queues[key].push(callback);\n            }\n            else {\n                queues[key] = [callback];\n                fn.apply(null, args.concat([_restParam(function (args) {\n                    memo[key] = args;\n                    var q = queues[key];\n                    delete queues[key];\n                    for (var i = 0, l = q.length; i < l; i++) {\n                        q[i].apply(null, args);\n                    }\n                })]));\n            }\n        });\n        memoized.memo = memo;\n        memoized.unmemoized = fn;\n        return memoized;\n    };\n\n    async.unmemoize = function (fn) {\n        return function () {\n            return (fn.unmemoized || fn).apply(null, arguments);\n        };\n    };\n\n    function _times(mapper) {\n        return function (count, iterator, callback) {\n            mapper(_range(count), iterator, callback);\n        };\n    }\n\n    async.times = _times(async.map);\n    async.timesSeries = _times(async.mapSeries);\n    async.timesLimit = function (count, limit, iterator, callback) {\n        return async.mapLimit(_range(count), limit, iterator, callback);\n    };\n\n    async.seq = function (/* functions... */) {\n        var fns = arguments;\n        return _restParam(function (args) {\n            var that = this;\n\n            var callback = args[args.length - 1];\n            if (typeof callback == 'function') {\n                args.pop();\n            } else {\n                callback = noop;\n            }\n\n            async.reduce(fns, args, function (newargs, fn, cb) {\n                fn.apply(that, newargs.concat([_restParam(function (err, nextargs) {\n                    cb(err, nextargs);\n                })]));\n            },\n            function (err, results) {\n                callback.apply(that, [err].concat(results));\n            });\n        });\n    };\n\n    async.compose = function (/* functions... */) {\n        return async.seq.apply(null, Array.prototype.reverse.call(arguments));\n    };\n\n\n    function _applyEach(eachfn) {\n        return _restParam(function(fns, args) {\n            var go = _restParam(function(args) {\n                var that = this;\n                var callback = args.pop();\n                return eachfn(fns, function (fn, _, cb) {\n                    fn.apply(that, args.concat([cb]));\n                },\n                callback);\n            });\n            if (args.length) {\n                return go.apply(this, args);\n            }\n            else {\n                return go;\n            }\n        });\n    }\n\n    async.applyEach = _applyEach(async.eachOf);\n    async.applyEachSeries = _applyEach(async.eachOfSeries);\n\n\n    async.forever = function (fn, callback) {\n        var done = only_once(callback || noop);\n        var task = ensureAsync(fn);\n        function next(err) {\n            if (err) {\n                return done(err);\n            }\n            task(next);\n        }\n        next();\n    };\n\n    function ensureAsync(fn) {\n        return _restParam(function (args) {\n            var callback = args.pop();\n            args.push(function () {\n                var innerArgs = arguments;\n                if (sync) {\n                    async.setImmediate(function () {\n                        callback.apply(null, innerArgs);\n                    });\n                } else {\n                    callback.apply(null, innerArgs);\n                }\n            });\n            var sync = true;\n            fn.apply(this, args);\n            sync = false;\n        });\n    }\n\n    async.ensureAsync = ensureAsync;\n\n    async.constant = _restParam(function(values) {\n        var args = [null].concat(values);\n        return function (callback) {\n            return callback.apply(this, args);\n        };\n    });\n\n    async.wrapSync =\n    async.asyncify = function asyncify(func) {\n        return _restParam(function (args) {\n            var callback = args.pop();\n            var result;\n            try {\n                result = func.apply(this, args);\n            } catch (e) {\n                return callback(e);\n            }\n            // if result is Promise object\n            if (_isObject(result) && typeof result.then === \"function\") {\n                result.then(function(value) {\n                    callback(null, value);\n                })[\"catch\"](function(err) {\n                    callback(err.message ? err : new Error(err));\n                });\n            } else {\n                callback(null, result);\n            }\n        });\n    };\n\n    // Node.js\n    if (typeof module === 'object' && module.exports) {\n        module.exports = async;\n    }\n    // AMD / RequireJS\n    else if (typeof define === 'function' && define.amd) {\n        define([], function () {\n            return async;\n        });\n    }\n    // included directly via <script> tag\n    else {\n        root.async = async;\n    }\n\n}());\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};","import { AddImageOption } from './AddImageOption';\nimport { Attachment } from '../data';\nimport { AddImageResult } from './AddImageResult';\n\n// Todo: Is this public exist anywhere?\ndeclare let unescape: any;\n\nconst ConfigTranslations = (pipTranslateProvider: pip.services.ITranslateProvider) => {\n    pipTranslateProvider.translations('en', {\n        'FILE': 'Upload pictures',\n        'WEB_LINK': 'Use web link',\n        'CAMERA': 'Take photo',\n        'IMAGE_GALLERY': 'Use image library',\n    });\n    pipTranslateProvider.translations('ru', {\n        'FILE': 'Загрузить картинку',\n        'WEB_LINK': 'Вставить веб ссылка',\n        'CAMERA': 'Использовать камеру',\n        'IMAGE_GALLERY': 'Открыть галерею изображений'\n    });\n}\n\n{\n    interface IAddImageScope extends angular.IScope {\n        $images: AddImageResult[];\n        onChange: any;\n        multi: any;\n        option: any;\n        ngDisabled: any;\n    }\n\n    class AddImageController {\n        public option: AddImageOption;\n\n        constructor(\n            private $scope: IAddImageScope,\n            private $element,\n            private $mdMenu,\n            private $timeout,\n            private pipCameraDialog,\n            private pipPictureUrlDialog,\n            private pipGallerySearchDialog\n        ) {\n            \"ngInject\";\n\n            let defaultOption = new AddImageOption();\n\n            this.option = _.assign(defaultOption, this.$scope.option);\n        }\n\n        public openMenu($mdOpenMenu): void {\n            if (this.$scope.ngDisabled()) {\n                return;\n            }\n\n            $mdOpenMenu();\n        }\n\n        private toBoolean(value: any): boolean {\n            if (!value) { return false; }\n\n            value = value.toString().toLowerCase();\n\n            return value == '1' || value == 'true';\n        }\n\n        public isMulti(): boolean {\n            if (this.$scope.multi !== undefined && this.$scope.multi !== null) {\n                if (angular.isFunction(this.$scope.multi)) {\n                    return this.toBoolean(this.$scope.multi());\n                } else {\n                    return this.toBoolean(this.$scope.multi);\n                }\n            } else {\n                return true;\n            }\n        }\n\n        public hideMenu(): void {\n            this.$mdMenu.hide();\n        }\n\n        public dataURItoBlob(dataURI: string): Blob {\n            let byteString;\n\n            if (dataURI.split(',')[0].indexOf('base64') >= 0) {\n                byteString = atob(dataURI.split(',')[1]);\n            } else {\n                byteString = unescape(dataURI.split(',')[1]);\n            }\n            let mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];\n\n            let ia = new Uint8Array(byteString.length);\n            let i: number;\n            for (i = 0; i < byteString.length; i++) {\n                ia[i] = byteString.charCodeAt(i);\n            }\n\n            return new Blob([ia], { type: mimeString });\n        }\n\n        public addImages(images: any): void {\n            if (images === undefined) { return; }\n\n            if (angular.isArray(images)) {\n                images.forEach((img: AddImageResult) => {\n                    if (this.$scope.onChange) {\n                        this.$scope.onChange(img);\n                    }\n                });\n            } else {\n                if (this.$scope.onChange) {\n                    this.$scope.onChange(images);\n                }\n            }\n\n            if (this.$scope.$images === undefined || !Array.isArray(this.$scope.$images)) {\n                return;\n            }\n\n            if (Array.isArray(images)) {\n                images.forEach((img) => {\n                    this.$scope.$images.push(img);\n                });\n            } else {\n                this.$scope.$images.push(images);\n            }\n        }\n\n        // Process user actions\n        public onFileChange($files: any): void {\n            if ($files == null || $files.length == 0) { return; }\n\n            $files.forEach((file) => {\n                if (file.type.indexOf('image') > -1) {\n                    this.$timeout(() => {\n                        let fileReader = new FileReader();\n                        fileReader.readAsDataURL(file);\n                        fileReader.onload = (e) => {\n                            this.$timeout(() => {\n                                this.addImages({ url: null, uriData: (e.target as any).result, file: file, picture: null });\n                            });\n                        }\n                    });\n                }\n            });\n\n        }\n\n        public onWebLinkClick(): void {\n            this.pipPictureUrlDialog.show((result) => {\n                let blob = null;\n                if (result.substring(0, 10) == 'data:image') {\n                    blob = this.dataURItoBlob(result);\n                    blob.name = result.slice(result.lastIndexOf('/') + 1, result.length).split('?')[0];\n                }\n                this.addImages({ url: result, uriData: null, file: blob, picture: null });\n            });\n        }\n\n        public onCameraClick(): void {\n            this.pipCameraDialog.show((result) => {\n                let blob: any = this.dataURItoBlob(result);\n                blob.name = 'camera';\n                this.addImages({ url: null, uriData: result, file: blob, picture: null });\n            });\n        }\n\n        public onGalleryClick(): void {\n            this.pipGallerySearchDialog.show(\n                {\n                    multiple: this.isMulti()\n                },\n                (result: Attachment[]) => {\n                    if (this.isMulti()) {\n                        let imgs: AddImageResult[] = [];\n                        result.forEach((item: Attachment) => {\n                            imgs.push({ url: null, uriData: null, file: null,  picture: item });\n                        });\n                        this.addImages(imgs);\n                    } else {\n                        this.addImages({ url: null, uriData: null, file: null, picture: result[0] });\n                    }\n                }\n            );\n        }\n    }\n\n    const AddImage = function (): ng.IDirective {\n        return {\n            restrict: 'AC',\n            scope: {\n                $images: '=pipImages',\n                onChange: '&pipChanged',\n                multi: '&pipMulti',\n                option: '=pipOption',\n                ngDisabled: '&'\n            },\n            transclude: true,\n            templateUrl: 'add_image/AddImage.html',\n            controller: AddImageController,\n            controllerAs: 'vm'\n        };\n    }\n\n    angular\n        .module('pipAddImage', ['pipCameraDialog', 'pipPictureUrlDialog', 'pipGallerySearchDialog', 'angularFileUpload'])\n        .config(ConfigTranslations)\n        .directive('pipAddImage', AddImage);\n}\n","export class AddImageOption {\n    public Upload: boolean = true;\n    public WebLink: boolean = true;\n    public Camera: boolean = true;\n    public Galery: boolean = true;\n}","import { Attachment } from '../data';\n\nexport class AddImageResult {\n    public picture?: Attachment;\n    public file?: any;\n    public uriData?: any;\n    public url?: string;\n}","import { IPictureUtilsService } from '../utilities/IPictureUtils';\nimport { IAvatarDataService, colors, colorClasses } from '../data/IAvatarDataService';\nimport { ReloadAvatar } from '../avatar_edit/AvatarEdit';\n\n{\n    interface IAvatarBindings {\n        [key: string]: any;\n\n        pipId: any;\n        pipUrl: any;\n        pipName: any;\n        ngClass: any;\n        pipRebindAvatar: any;\n        pipRebind: any;\n    }\n\n    const AvatarBindings: IAvatarBindings = {\n        pipId: '<?',\n        pipUrl: '<?',\n        pipName: '<?',\n        ngClass: '<?',\n        pipRebindAvatar: '<?',\n        pipRebind: '<?'\n    }\n\n    class AvatarBindingsChanges implements ng.IOnChangesObject, IAvatarBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        pipId: ng.IChangesObject<string>;\n        pipUrl: ng.IChangesObject<string>;\n        pipName: ng.IChangesObject<string>;\n        ngClass: ng.IChangesObject<string>;\n        pipRebindAvatar: ng.IChangesObject<boolean>;\n        pipRebind: ng.IChangesObject<boolean>;\n    }\n\n    class AvatarController {\n        private cleanupAvatarUpdated: Function;\n        private imageElement: any;\n        // private iconErrorElement: any;\n        private defaultAvatarElement: any;\n        private image: any;\n\n        public pipId: string;\n        public pipUrl: string;\n        public pipName: string;\n\n        public ngClass: string;\n        public pipRebindAvatar: boolean;\n        public pipRebind: boolean;\n\n        public postLink: boolean = false;\n        // public errorIcon: string;\n        public initial: string;\n\n        constructor(\n            private $log: ng.ILogService,\n            private $http: ng.IHttpService,\n            private $rootScope: ng.IRootScopeService,\n            private $element: JQuery,\n            private pipAvatarData: IAvatarDataService,\n            private pipPictureUtils: IPictureUtilsService,\n            private pipCodes: pip.services.ICodes,\n            private $timeout\n        ) {\n            \"ngInject\";\n\n            this.image = null;\n\n            // this.errorIcon = 'icon:warn-star';\n            this.initial = this.pipAvatarData.DefaultInitial;\n            // Add class\n            $element.addClass('pip-avatar flex-fixed');\n\n            this.$rootScope.$on(ReloadAvatar, ($event: ng.IAngularEvent, id: string) => { //navState\n                if (this.pipId == id && this.pipRebind) {\n                    this.refreshAvatar();\n                }\n            });\n        }\n\n        public $postLink() {\n            this.imageElement = this.$element.children('img');\n            // this.iconErrorElement = this.$element.find('#icon-error');\n            this.defaultAvatarElement = this.$element.find('#default-avatar');\n\n            // When image is loaded resize/reposition it\n            this.imageElement\n                .load(($event) => {\n                    this.image = $($event.target);\n                    this.pipPictureUtils.setImageMarginCSS(this.$element, this.image);\n                })\n                .error(($event) => {\n                    this.showAvatarByName();\n                });\n\n            this.bindControl();\n\n            this.postLink = true;\n        }\n\n        public $onChanges(changes: AvatarBindingsChanges): void {\n            if (changes.pipRebind && changes.pipRebind.currentValue !== changes.pipRebind.previousValue) {\n                this.pipRebind = changes.pipRebind.currentValue;\n            }\n            if (changes.pipRebindAvatar && changes.pipRebindAvatar.currentValue !== changes.pipRebindAvatar.previousValue) {\n                this.pipRebindAvatar = changes.pipRebindAvatar.currentValue;\n            }\n            if (changes.ngClass && changes.ngClass.currentValue !== changes.ngClass.previousValue) {\n                this.ngClass = changes.ngClass.currentValue;\n                setTimeout(() => {\n                    this.pipPictureUtils.setImageMarginCSS(this.$element, this.image);\n                }, 50);\n            }\n\n            let isDataChange: boolean = false;\n            if (this.pipRebind) {\n                if (changes.pipId && changes.pipId.currentValue !== changes.pipId.previousValue) {\n                    this.pipId = changes.pipId.currentValue;\n                    isDataChange = true;\n                }\n\n                if (changes.pipUrl && changes.pipUrl.currentValue !== changes.pipUrl.previousValue) {\n                    this.pipUrl = changes.pipUrl.currentValue;\n                    isDataChange = true;\n                }\n\n                if (changes.pipName && changes.pipName.currentValue !== changes.pipName.previousValue) {\n                    this.pipName = changes.pipName.currentValue;\n                    isDataChange = true;\n                }\n            }\n\n            // this.avatarUrlParams = this.getAvatarUrlParams();\n            if (isDataChange && this.postLink) {\n                this.refreshAvatar();\n            }\n        }\n\n        private showAvatarByName() {\n            this.$timeout(() => {\n                let colorClassIndex = this.pipCodes.hash(this.pipId) % colors.length;\n                this.defaultAvatarElement.removeAttr('class');\n                this.defaultAvatarElement.addClass(colorClasses[colorClassIndex]);\n                this.imageElement.css('display', 'none');\n                this.defaultAvatarElement.css('display', 'inline-block');\n            })\n\n        }\n\n        private toBoolean(value: any): boolean {\n            if (!value) { return false; }\n            value = value.toString().toLowerCase();\n\n            return value == '1' || value == 'true';\n        }\n\n        public refreshAvatar(): void {\n\n            if (!this.pipAvatarData.ShowOnlyNameIcon) {\n                this.imageElement.attr('src', '');\n                this.imageElement.css('display', 'inline-block');\n                this.defaultAvatarElement.css('display', 'none');\n            }\n\n            this.bindControl();\n        };\n\n        public bindControl(): void {\n            if (this.pipRebindAvatar) {\n                this.cleanupAvatarUpdated = this.$rootScope.$on('pipPartyAvatarUpdated', () => { this.refreshAvatar(); });\n            } else {\n                if (this.cleanupAvatarUpdated) {\n                    this.cleanupAvatarUpdated();\n                }\n            }\n\n            if (this.pipName) {\n                this.initial = this.pipName.charAt(0);\n            } else {\n                this.initial = this.pipAvatarData.DefaultInitial;\n            }\n\n            if (!this.pipAvatarData.ShowOnlyNameIcon) {\n                let url = this.pipId ? this.pipAvatarData.getAvatarUrl(this.pipId) : this.pipUrl;\n                this.imageElement.attr('src', url);\n            } else {\n                this.showAvatarByName();\n            }\n        }\n\n    }\n\n    const AvatarComponent: ng.IComponentOptions = {\n        bindings: AvatarBindings,\n        template: '<img/><div id=\"default-avatar\">{{ $ctrl.initial }}</div>',\n        controller: AvatarController\n    }\n\n    angular\n        .module('pipAvatar', ['pipPictureUtils'])\n        .component('pipAvatar', AvatarComponent);\n}\n\n","import { IPictureUtilsService } from '../utilities/IPictureUtils';\nimport { PicturePaste } from '../utilities/PicturePaste';\nimport { IAvatarDataService } from '../data/IAvatarDataService';\nimport { AddImageOption } from '../add_image/AddImageOption';\nimport { AddImageResult } from '../add_image/AddImageResult';\n\nexport const ReloadAvatar = 'pipReloadAvatar';\n\nexport class AvatarEditControl {\n    public reset: (afterDeleting?: boolean) => void;\n    public save: (id?: string, successCallback?: (response?: any) => void, errorCallback?: (error?: any) => void) => void;\n    public abort: () => void;\n    public error?: any;\n\n    public disabled: boolean = false;\n    public url: string = '';\n    public uriData: any;\n    public progress: number = 0;\n    public uploaded: boolean = false;\n    public uploading: boolean = false;\n    public upload: boolean = false;\n    public loaded: boolean = false;\n    public file: any = null;\n    public state: string = AvatarStates.Original;\n}\n\nexport class AvatarStates {\n    static Original: string = 'original';\n    static Changed: string = 'changed';\n    static Deleted: string = 'deleted';\n    static Error: string = 'error';\n}\n\n{\n    const ConfigAvatarEditTranslations = (pipTranslateProvider: pip.services.ITranslateProvider) => {\n        pipTranslateProvider.translations('en', {\n            'PICTURE_EDIT_TEXT': 'Click here to upload a picture',\n            'PICTURE_ERROR_LOAD': 'Error image loading'\n        });\n        pipTranslateProvider.translations('ru', {\n            'PICTURE_EDIT_TEXT': 'Нажмите сюда для загрузки картинки',\n            'PICTURE_ERROR_LOAD': 'Ошибка загрузки картинки'\n        });\n    }\n\n\n    class SenderEvent {\n        $control: AvatarEditControl;\n    }\n\n    class AvatarEvent {\n        $event: SenderEvent;\n        $control: AvatarEditControl;\n    }\n\n    interface IAvatarEditBindings {\n        [key: string]: any;\n\n        ngDisabled: any;\n        pipCreated: any;\n        pipChanged: any;\n        pipReset: any;\n        pipId: any;\n        text: any;\n        icon: any;\n        pipRebind: any;\n    }\n\n    const AvatarEditBindings: IAvatarEditBindings = {\n        ngDisabled: '<?',\n        pipCreated: '&?',\n        pipChanged: '&?',\n        pipReset: '<?',\n        pipId: '<?',\n        text: '<?pipDefaultText',\n        icon: '<?pipDefaultIcon',\n        pipRebind: '<?',\n    }\n\n    class AvatarEditBindingsChanges implements ng.IOnChangesObject, IAvatarEditBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        ngDisabled: ng.IChangesObject<boolean>;\n        pipCreated: ng.IChangesObject<(params: AvatarEvent) => ng.IPromise<void>>;\n        pipChanged: ng.IChangesObject<(params: AvatarEvent) => ng.IPromise<void>>;\n        pipReset: ng.IChangesObject<boolean>;\n        pipId: ng.IChangesObject<string>;\n        text: ng.IChangesObject<string>;\n        icon: ng.IChangesObject<string>;\n        pipRebind: ng.IChangesObject<boolean>;\n    }\n\n    class AvatarEditController {\n        private controlElement: any;\n        private inputElement: any;\n        private pipPicturePaste: PicturePaste;\n\n        public ngDisabled: boolean;\n        public pipCreated: (params: AvatarEvent) => void;\n        public pipChanged: (params: AvatarEvent) => void;\n        public pipReset: boolean;\n        public text: string;\n        public icon: string;\n        public pipId: string;\n        public pipRebind: boolean;\n\n        public multiUpload: boolean;\n        public errorText: string;\n        public control: AvatarEditControl;\n        public option: AddImageOption;\n\n        constructor(\n            private $log: ng.ILogService,\n            private $scope: ng.IScope,\n            private $http: ng.IHttpService,\n            private $rootScope: ng.IRootScopeService,\n            private $element: JQuery,\n            private $timeout: ng.ITimeoutService,\n            private pipAvatarData: IAvatarDataService,\n            private pipCodes: pip.services.ICodes,\n            private pipPictureUtils: IPictureUtilsService,\n            private pipFileUpload: pip.files.IFileUploadService,\n            private pipRest: pip.rest.IRestService\n        ) {\n            \"ngInject\";\n            this.pipPicturePaste = new PicturePaste($timeout);\n            this.option = new AddImageOption();\n            this.option.WebLink = false;\n            this.option.Galery = false;\n\n            this.text = this.text || 'PICTURE_EDIT_TEXT';\n            this.icon = this.icon || 'picture-no-border';\n            this.errorText = 'PICTURE_ERROR_LOAD';\n\n            this.control = new AvatarEditControl();\n            this.multiUpload = false;\n\n            this.control.reset = (afterDeleting: boolean) => {\n                this.reset(afterDeleting);\n            }\n            this.control.save = (id?: string, successCallback?: (response?: any) => void, errorCallback?: (error?: any) => void): void => {\n                this.save(id, successCallback, errorCallback);\n            }\n            // Add class\n            $element.addClass('pip-picture-edit');\n        }\n\n        public $postLink() {\n            this.controlElement = this.$element.children('.pip-picture-upload');\n            this.inputElement = this.controlElement.children('input[type=file]');\n\n            // Add paste listener\n            this.$element.children('.pip-picture-upload').focus(() => {\n                this.pipPicturePaste.addPasteListener((item) => {\n                    this.readItemLocally(item.url, item.uriData, item.file, item.picture);\n                });\n            });\n\n            this.$element.children('.pip-picture-upload').blur(() => {\n                this.pipPicturePaste.removePasteListener();\n            });\n\n            // Execute callback\n            if (this.pipCreated) {\n                this.pipCreated({\n                    $event: { $control: this.control },\n                    $control: this.control\n                });\n            }\n\n            // Initialize control\n            this.control.reset();\n        }\n\n        public $onChanges(changes: AvatarEditBindingsChanges): void {\n            if (changes.pipRebind && changes.pipRebind.currentValue !== changes.pipRebind.previousValue) {\n                this.pipRebind = changes.pipRebind.currentValue;\n            }\n            if (changes.pipReset && changes.pipReset.currentValue !== changes.pipReset.previousValue) {\n                this.pipReset = changes.pipReset.currentValue;\n            }\n\n            let isReset: boolean = false;\n            if (this.pipRebind) {\n\n                if (changes.pipId && changes.pipId.currentValue !== changes.pipId.previousValue) {\n                    this.pipId = changes.pipId.currentValue;\n                    if (this.pipReset !== false) {\n                        isReset = true;\n                    }\n                }\n\n                if (changes.ngDisabled && changes.ngDisabled.currentValue !== changes.ngDisabled.previousValue) {\n                    this.ngDisabled = changes.ngDisabled.currentValue;\n                }\n            }\n            if (changes.pipId && changes.pipId.currentValue && this.control && this.control.state != AvatarStates.Deleted && this.control.state != AvatarStates.Changed ) {\n                isReset = true;\n            }\n            if (isReset) {\n                this.control.reset();\n            }\n        }\n\n        public reset(afterDeleting: boolean): void {\n            this.control.progress = 0;\n            this.control.uploading = false;\n            this.control.uploaded = false;\n\n            this.control.file = null;\n            this.control.state = AvatarStates.Original;\n            this.control.url = '';\n            this.control.uriData = null;\n\n            if (!afterDeleting) {\n                var url = this.pipId ? this.pipAvatarData.getAvatarUrl(this.pipId) : '';\n\n                if (!url) return;\n\n                this.control.progress = 0;\n                this.control.url = url;\n                this.control.uploaded = this.control.url != '';\n                this.onChange();\n\n            } else this.onChange();\n        }\n\n        public saveAvatar(id: string, successCallback?: (response?: any) => void, errorCallback?: (error?: any) => void): void {\n            if (!id) {\n                id = this.pipId;\n            }\n            if (this.control.file !== null) {\n                let fd: FormData = new FormData();\n                fd.append('file', this.control.file);\n                this.control.uploading = true;\n                this.$http.put(this.pipAvatarData.getAvatarUrl(id), fd, <any>{\n                    uploadEventHandlers: {\n                        progress: (e: any) => {\n                            if (e.lengthComputable) {\n                                this.control.progress = (e.loaded / e.total) * 100;\n                            }\n                        }\n                    },\n                    headers: { 'Content-Type': undefined }\n                })\n                    .success((response: any) => {\n                        this.control.progress = 100;\n\n                        this.pipId = response.id;\n                        this.$rootScope.$broadcast(ReloadAvatar, this.pipId);\n                        \n                        this.control.reset();\n                        if (successCallback) {\n                            successCallback(response);\n                        }\n                    })\n                    .error((error: any) => {\n                        this.control.progress = 0;\n                        this.control.uploading = false;\n                        this.control.upload = false;\n                        this.control.progress = 0;\n                        this.control.state = AvatarStates.Original; //AvatarStates.Error;\n\n                        if (errorCallback) {\n                            errorCallback(error);\n                        } else {\n                            this.$log.error(error);\n                        }\n                    });\n            }\n        }\n\n        public deletePicture(successCallback?: (response?: any) => void, errorCallback?: (error?: any) => void): void {\n            this.pipAvatarData.deleteAvatar(\n                this.pipId,\n                () => {\n                    this.$rootScope.$broadcast(ReloadAvatar, this.pipId);\n                    this.control.reset(true);\n\n                    if (successCallback) { successCallback(); }\n                },\n                (error: any) => {\n                    this.control.uploading = false;\n                    this.control.upload = false;\n                    this.control.progress = 0;\n                    this.control.state = AvatarStates.Original; // AvatarStates.Error;\n\n                    if (errorCallback) {\n                        errorCallback(error);\n                    } else {\n                        this.$log.error(error);\n                    }\n                }\n            );\n        }\n\n        public save(id: string, successCallback?: (response?: any) => void, errorCallback?: (error?: any) => void): void {\n            // Process changes of the image\n            if (this.control.state == AvatarStates.Changed) {\n                this.saveAvatar(id, successCallback, errorCallback);\n            }\n            // Process deletion of the image\n            else if (this.control.state == AvatarStates.Deleted) {\n                this.deletePicture(successCallback, errorCallback);\n            }\n            // Process if no changes were made \n            else {\n                if (successCallback) successCallback();\n            }\n        }\n\n        // Visual publics\n        public empty(): boolean {\n            return this.control.url == '' && !this.control.uploading;\n        };\n\n        public isUpdated(): boolean {\n            return this.control.state != AvatarStates.Original;\n        };\n\n        // Process user events\n        public readItemLocally(url, uriData, file, picture): void {\n            if (picture) {\n                // todo set avatar\n                this.control.url = this.pipAvatarData.getAvatarUrl(this.pipId);\n            } else {\n                this.control.file = file;\n                this.control.url = file ? uriData : url ? url : '';\n                // todo uriData - save as blob\n            }\n\n            this.control.state = AvatarStates.Changed;\n            this.onChange();\n        };\n\n        public onDeleteClick($event: JQueryEventObject): void {\n            if ($event) {\n                $event.stopPropagation();\n            }\n\n            this.controlElement.focus();\n            this.control.file = null;\n            this.control.url = '';\n            this.control.state = AvatarStates.Deleted;\n\n            this.onChange();\n        };\n\n        public onKeyDown($event: KeyboardEvent): void {\n            if ($event.keyCode == 13 || $event.keyCode == 32) {\n                setTimeout(() => {\n                    this.controlElement.trigger('click');\n                }, 0);\n            } else if ($event.keyCode == 46 || $event.keyCode == 8) {\n                this.control.file = null;\n                this.control.url = '';\n                this.control.state = AvatarStates.Deleted;\n\n                this.onChange();\n            } else if ($event.keyCode == 27) {\n                this.control.reset();\n            }\n        };\n\n        // Clean up url to remove broken icon\n        public onImageError($event: JQueryEventObject): void {\n            this.$scope.$apply(() => {\n                this.control.url = '';\n                let image = $($event.target);\n                this.control.state = AvatarStates.Original; // AvatarStates.Error;\n                this.pipPictureUtils.setErrorImageCSS(image, { width: 'auto', height: '100%' });\n            });\n        };\n\n        // When image is loaded resize/reposition it\n        public onImageLoad($event: JQueryEventObject) {\n            let image = $($event.target);\n            let container: any = {}; //JQuery = _.cloneDeep(this.controlElement);\n            container.clientWidth = 80;\n            container.clientHeight = 80;\n            this.pipPictureUtils.setImageMarginCSS(container, image);\n            this.control.uploading = false;\n        };\n\n        // On change event\n        public onChange() {\n            if (this.pipChanged) {\n                this.pipChanged({\n                    $event: { $control: this.control },\n                    $control: this.control\n                });\n            }\n        };\n\n    }\n\n    const AvatarEditComponent: ng.IComponentOptions = {\n        bindings: AvatarEditBindings,\n        templateUrl: 'picture_edit/PictureEdit.html',\n        controller: AvatarEditController\n    }\n\n    angular\n        .module('pipAvatarEdit', ['ui.event', 'pipPictureUtils', 'pipPictures.Templates', 'pipFiles'])\n        .config(ConfigAvatarEditTranslations)\n        .component('pipAvatarEdit', AvatarEditComponent);\n}\n\n","﻿const ConfigCameraDialogTranslations = (pipTranslateProvider: pip.services.ITranslateProvider) => {\n    pipTranslateProvider.translations('en', {\n        'TAKE_PICTURE': 'Take a picture',\n        'WEB_CAM_ERROR': 'Webcam is missing or was not found'\n    });\n    pipTranslateProvider.translations('ru', {\n        'TAKE_PICTURE': 'Сделать фото',\n        'WEB_CAM_ERROR': 'Web-камера отсутствует или не найдена'\n    });\n}\n\ndeclare var Webcam: any;\ndeclare var Camera: any;\n{\n    class CameraDialogController {\n        public webCamError: boolean\n        public theme: string;\n        public browser: string;\n        public freeze: boolean;\n\n        constructor(\n            private $mdDialog: angular.material.IDialogService,\n            private $rootScope: ng.IRootScopeService,\n            private $timeout: ng.ITimeoutService,\n            private $mdMenu,\n            private pipSystemInfo: pip.services.ISystemInfo\n        ) {\n            \"ngInject\";\n\n            this.theme = this.$rootScope[pip.themes.ThemeRootVar];\n            this.browser = this.pipSystemInfo.os;\n            this.freeze = false;\n\n            this.onInit();\n        }\n\n        private onInit() {\n\n\n            if (this.browser !== 'android') {\n                Webcam.init();\n\n                setTimeout(() => {\n                    Webcam.attach('.camera-stream');\n                }, 0);\n\n                Webcam.on('error', (err: any) => {\n                    this.webCamError = true;\n                    console.error(err);\n                });\n\n                Webcam.set({\n                    width: 400,\n                    height: 300,\n\n                    dest_width: 400,\n                    dest_height: 300,\n\n                    crop_width: 400,\n                    crop_height: 300,\n\n                    image_format: 'jpeg',\n                    jpeg_quality: 90\n                });\n\n                //Webcam.setSWFLocation('../../../dist/webcam.swf');\n                Webcam.setSWFLocation('webcam.swf');\n\n            } else {\n                document.addEventListener(\"deviceready\", this.onDeviceReady, false);\n            }\n        }\n\n        // todo add logic in callbacks\n        public onDeviceReady() {\n            (navigator as any).camera.getPicture((data) => { this.onSuccess(data); }, (message) => { this.onFail(message); },\n                {\n                    sourceType: Camera.PictureSourceType.CAMERA,\n                    correctOrientation: true,\n                    quality: 75,\n                    targetWidth: 200,\n                    destinationType: Camera.DestinationType.DATA_URL\n                });\n        }\n\n        public onSuccess(imageData) {\n            //var picture = imageData;\n            var picture = 'data:image/jpeg;base64,' + imageData;\n            this.$mdDialog.hide(picture);\n        }\n\n        public onFail(message) {\n            alert('Failed because: ' + message);\n            this.$mdDialog.hide();\n        }\n\n        public onTakePictureClick() {\n            if (Webcam) {\n                if (this.freeze) {\n                    Webcam.snap((dataUri) => {\n                        this.freeze = false;\n                        this.$mdDialog.hide(dataUri);\n                    });\n                } else {\n                    this.freeze = true;\n                    Webcam.freeze();\n                }\n            }\n        }\n\n        public onResetPicture() {\n            this.freeze = false;\n            Webcam.unfreeze();\n        }\n\n        public onCancelClick() {\n            this.$mdDialog.cancel();\n        }\n    }\n\n\n    angular\n        .module('pipCameraDialog')\n        .config(ConfigCameraDialogTranslations)\n        .controller('pipCameraDialogController', CameraDialogController);\n\n}","import { ICameraDialogService } from './ICameraDialogService';\n\ndeclare var Webcam: any;\n\nclass CameraDialogService implements ICameraDialogService {\n    private _mdDialog: angular.material.IDialogService;\n\n    constructor($mdDialog: angular.material.IDialogService) {\n        this._mdDialog = $mdDialog;\n\n    }\n\n    public show(successCallback?: (result) => void, cancelCallback?: () => void) {\n        this._mdDialog.show({\n            templateUrl: 'camera_dialog/CameraDialog.html',\n            clickOutsideToClose: true,\n            controller: 'pipCameraDialogController',\n            controllerAs: '$ctrl'\n        })\n        .then(\n            (result) => {\n                Webcam.reset();\n                if (successCallback) {\n                    successCallback(result);\n                }\n            }, \n            () => {\n                Webcam.reset();\n            }\n        );\n\n    }\n\n}\n\nangular\n    .module('pipCameraDialog')\n    .service('pipCameraDialog', CameraDialogService);","angular\n    .module('pipCameraDialog',\n        ['ngMaterial', 'pipServices', 'pipPictures.Templates']);\n\nimport './ICameraDialogService';\nimport './CameraDialogService';\nimport './CameraDialogController';\n\n\nexport * from './ICameraDialogService';\n","import { IPictureUtilsService } from '../utilities/IPictureUtils';\nimport { PicturePaste } from '../utilities/PicturePaste';\nimport { IPictureDataService } from '../data/IPictureDataService';\nimport { Attachment } from '../data';\n\n{\n    class ContainerSize {\n        public w: number;\n        public h: number;\n    }\n\n    interface ICollageBindings {\n        [key: string]: any;\n\n        pipPictureIds: any;\n        pipSrcs: any;\n        pipPictures: any;\n        uniqueCode: any;\n        multiple: any;\n        allowOpen: any;\n        pipRebind: any;\n    }\n\n    const CollageBindings: ICollageBindings = {\n        pipPictureIds: '<?',\n        pipSrcs: '<?',\n        pipPictures: '<?',\n        uniqueCode: '<?pipUniqueCode',\n        multiple: '<?pipMultiple',\n        allowOpen: '<?pipOpen',\n        pipRebind: '<?',\n    }\n\n    class CollageBindingsChanges implements ng.IOnChangesObject, ICollageBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        pipPictureIds: ng.IChangesObject<string[]>;\n        pipSrcs: ng.IChangesObject<string[]>;\n        pipPictures: ng.IChangesObject<Attachment[]>;\n        uniqueCode: ng.IChangesObject<string>;\n        multiple: ng.IChangesObject<boolean>;\n        allowOpen: ng.IChangesObject<boolean>;\n        pipRebind: ng.IChangesObject<boolean>;\n    }\n\n    class CollageController {\n        private debounceCalculateResize: any;\n\n        public pipPictureIds: string[];\n        public pipSrcs: string[];\n        public pipPictures: Attachment[];\n        public uniqueCode: string;\n        public multiple: boolean;\n        public allowOpen: boolean;\n        public pipRebind: boolean;\n\n        private svgData: any;\n        private resized: number;\n        private collageSchemes: any;\n\n        constructor(\n            private $log: ng.ILogService,\n            private $scope: ng.IScope,\n            private $rootScope: ng.IRootScopeService,\n            private $element: JQuery,\n            private pipPictureData: IPictureDataService,\n            private pipPictureUtils: IPictureUtilsService,\n            private pipCodes: pip.services.ICodes\n        ) {\n            \"ngInject\";\n\n            // Add class\n            $element.addClass('pip-collage');\n\n            this.collageSchemes = pipPictureUtils.getCollageSchemes(),\n                this.resized = 0;\n            this.svgData = '<?xml version=\"1.0\" encoding=\"utf-8\"?>' +\n                '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">' +\n                '<svg version=\"1.1\"'+\n                    'xmlns=\"http://www.w3.org/2000/svg\"'+\n                    'xmlns:xlink=\"http://www.w3.org/1999/xlink\"'+\n                    'x=\"0px\" y=\"0px\"'+\n                    'viewBox=\"0 0 510 510\"'+\n                    'style=\"enable-background:new 0 0 515 515;\"'+\n                    'xml:space=\"preserve\">'+\n                    '<defs>'+\n                    '<style type=\"text/css\"><![CDATA['+\n                    '#symbol-picture-no-border {'+\n                    '        transform-origin: 50% 50%;'+\n                    '        transform: scale(0.6, -0.6);'+\n                    '    }'+\n                    '        ]]></style>'+\n                    '        </defs>'+\n                    '<rect x=\"0\" width=\"515\" height=\"515\"/>'+\n                    '<path id=\"symbol-picture-no-border\" d=\"M120 325l136-102 69 33 136-82 0-54-410 0 0 136z m341 15c0-28-23-51-51-51-29 0-52 23-52 51 0 29 23 52 52 52 28 0 51-23 51-52z\" />'+\n                    '</svg>';\n\n            this.debounceCalculateResize = _.debounce(() => { this.calculateResize(); }, 50);\n        }\n\n        public $postLink() {\n            this.$scope.getElementDimensions = () => {\n                let dimension = {\n                    'h': this.$element.height(),\n                    'w': this.$element.width()\n                };\n\n                return dimension;\n            }\n\n            this.$scope.$watch(this.$scope.getElementDimensions, (newValue: ContainerSize, oldValue: ContainerSize) => {\n                if (newValue && oldValue && oldValue.h == newValue.h && oldValue.w == newValue.w) return;\n                this.debounceCalculateResize();\n            }, true);\n\n            this.generateContent();\n        }\n\n        public $onChanges(changes: CollageBindingsChanges): void {\n            if (changes.pipRebind && changes.pipRebind.currentValue !== changes.pipRebind.previousValue) {\n                this.pipRebind = changes.pipRebind.currentValue;\n            }\n\n            if (changes.allowOpen && changes.allowOpen.currentValue !== changes.allowOpen.previousValue) {\n                this.allowOpen = changes.allowOpen.currentValue;\n            }\n\n            let isChanged: boolean = false;\n            if (this.pipRebind) {\n                if (changes.pipSrcs && !_.isEqual(changes.pipSrcs.currentValue, changes.pipSrcs.previousValue)) {\n                    this.pipSrcs = changes.pipSrcs.currentValue;\n                    isChanged = true;\n                }\n                if (changes.pipPictureIds && !_.isEqual(changes.pipPictureIds.currentValue, changes.pipPictureIds.previousValue)) {\n                    this.pipPictureIds = changes.pipPictureIds.currentValue;\n                    isChanged = true;\n                }\n                if (changes.pipPictures && !_.isEqual(changes.pipPictures.currentValue, changes.pipPictures.previousValue)) {\n                    this.pipPictures = changes.pipPictures.currentValue;\n                    isChanged = true;\n                }\n            }\n\n            if (isChanged) {\n                this.generateContent();\n            }\n        }\n\n        public calculateResize(): void {\n            let ims = this.$element.find('img');\n            let i: number = 0;\n            for (i; i < ims.length; i++) {\n                let container = angular.element(ims[i].parentElement);\n                let image = angular.element(ims[i]);\n\n                if (image.css('display') != 'none') {\n                    this.pipPictureUtils.setImageMarginCSS(container, image);\n                }\n            }\n\n            let icns = this.$element.find('md-icon');\n\n            for (i; i < icns.length; i++) {\n                let container = angular.element(icns[i].parentElement);\n                let icn = angular.element(icns[i]);\n                if (container.css('display') != 'none') {\n                    this.pipPictureUtils.setIconMarginCSS(container[0], icn);\n                }\n            }\n        }\n\n        // Clean up url to remove broken icon\n        public onImageError($event: JQueryEventObject): void {\n            let image = $($event.target);\n            let container = image.parent();\n            let defaultBlock = container.children('div');\n            let defaultIcon = image.parent().find('md-icon');\n\n            defaultBlock.css('display', 'block');\n            image.css('display', 'none');\n            this.pipPictureUtils.setIconMarginCSS(container[0], defaultIcon);\n            defaultIcon.empty().append(this.svgData);\n        }\n\n        // When image is loaded resize/reposition it\n        public onImageLoad($event: JQueryEventObject) {\n            let image = $($event.target);\n            let container = image.parent();\n            let defaultBlock = container.children('div');\n\n            this.pipPictureUtils.setImageMarginCSS(container, image);\n            defaultBlock.css('display', 'none');\n        }\n\n        public getScheme(count: number): any {\n            let schemes = this.collageSchemes[count - 1];\n\n            // If nothing to choose from then return\n            if (schemes.length == 1) return schemes[0];\n\n            // Calculate unique had code\n            let uniqueCode: string = this.uniqueCode ? this.uniqueCode : '';\n            let hash = this.pipCodes.hash(uniqueCode);\n\n            // Return reproducable scheme by hash\n            return schemes[hash % schemes.length];\n        }\n\n        public getImageUrls(): string[] {\n            // Simply return sources\n            if (this.pipSrcs) {\n\n                return _.clone(this.pipSrcs);\n            }\n\n            let i: number;\n            let result: string[] = [];\n            // Calculate urls if picture ids are specified\n            if (this.pipPictureIds) {\n                for (i = 0; i < this.pipPictureIds.length; i++) {\n                    result.push(this.pipPictureData.getPictureUrl(this.pipPictureIds[i]));\n                }\n            } else if (this.pipPictures) {\n                for (i = 0; i < this.pipPictures.length; i++) {\n                    let url = this.pipPictures[i].uri ? this.pipPictures[i].uri : this.pipPictureData.getPictureUrl(this.pipPictures[i].id);\n                    result.push(url);\n                }\n            }\n\n            // Return an empty array otherwise\n            return result;\n        }\n\n        public generatePicture(urls: string[], scheme: any): string {\n            let url: string = urls[0];\n            let containerClasses: string = '';\n            let pictureClasses: string = '';\n\n            urls.splice(0, 1);\n\n            containerClasses += scheme.fullWidth ? ' pip-full-width' : '';\n            containerClasses += scheme.fullHeight ? ' pip-full-height' : '';\n            containerClasses += ' flex-' + scheme.flex;\n\n            pictureClasses += scheme.leftPadding ? ' pip-left' : '';\n            pictureClasses += scheme.rightPadding ? ' pip-right' : '';\n            pictureClasses += scheme.topPadding ? ' pip-top' : '';\n            pictureClasses += scheme.bottomPadding ? ' pip-bottom' : '';\n\n            if (this.allowOpen) {\n                return '<a class=\"pip-picture-container' + containerClasses + '\" flex=\"' + scheme.flex + '\" '\n                    + 'href=\"' + url + '\"  target=\"_blank\">'\n                    + '<div class=\"pip-picture' + pictureClasses + '\"><img src=\"' + url + '\"/>'\n                    + '<div><md-icon class=\"collage-error-icon\" md-svg-icon=\"icons:picture-no-border\"></md-icon></div></div></a>';\n            }\n\n            return '<div class=\"pip-picture-container' + containerClasses + '\" flex=\"' + scheme.flex + '\">'\n                + '<div class=\"pip-picture' + pictureClasses + '\"><img src=\"' + url + '\"/>'\n                + '<div><md-icon class=\"collage-error-icon\" md-svg-icon=\"icons:picture-no-border\"></md-icon></div></div></div>';\n        }\n\n        public generatePictureGroup(urls: string[], scheme: any): string {\n            let classes: string = '';\n            let result: string;\n            let i: number;\n\n            classes += scheme.fullWidth ? ' pip-full-width' : '';\n            classes += scheme.fullHeight ? ' pip-full-height' : '';\n            classes += ' flex-' + scheme.flex;\n            classes += ' layout-' + scheme.layout;\n\n            result = '<div class=\"pip-picture-group layout' + classes + '\" flex=\"'\n                + scheme.flex + '\" layout=\"' + scheme.layout + '\">';\n\n            // Generate content for children recursively\n            for (i = 0; i < scheme.children.length; i++) {\n                result += this.generate(urls, scheme.children[i]);\n            }\n            result += '</div>';\n\n            return result;\n        }\n\n        public generate(urls: string[], scheme: any): string {\n            if (scheme.group) {\n                return this.generatePictureGroup(urls, scheme);\n            }\n\n            return this.generatePicture(urls, scheme);\n        }\n\n        public generateContent(): void {\n            // Unbind previously defined actions handlers\n            this.$element.find('img')\n                .unbind('error')\n                .unbind('load');\n\n            // Clean up content\n            this.$element.empty();\n\n            // Calculate list of image urls\n            let urls: string[] = this.getImageUrls();\n            let scheme: any;\n            let html: string;\n\n            // And exit if nothing to show\n            if (urls.length == 0) {\n                this.$element.hide();\n\n                return;\n            }\n\n            // Limit collage only to one element if not specified otherwise\n            if (urls.length > 8) {\n                if (!this.multiple) {\n                    urls.length = 8;\n                }\n            }\n\n            if (urls.length <= 8) {\n                // Get scheme for visualization\n                scheme = this.getScheme(urls.length);\n\n                // Generate and add content\n                html = '<div class=\"pip-collage-section\">' + this.generate(urls, scheme) + '</div>';\n                html += '<div class=\"clearfix\"></div>';\n                this.$element.html(html);\n            } else {\n                html = '';\n\n                while (urls.length > 0) {\n                    let partialUrls = urls.splice(0, 8);\n\n                    // Get scheme for visualization\n                    scheme = this.getScheme(partialUrls.length);\n\n                    // Generate and add content\n                    html += '<div class=\"pip-collage-section\">' + this.generate(partialUrls, scheme) + '</div>';\n                }\n\n                html += '<div class=\"clearfix\"></div>';\n                this.$element.html(html);\n            }\n\n            // Bind events to images...\n            this.$element.find('img')\n                .bind('error', (event) => { this.onImageError(event); })\n                .bind('load', (event) => { this.onImageLoad(event); });\n\n            // Show the new element\n            this.$element.show();\n        }\n\n    }\n\n    const CollageComponent: ng.IComponentOptions = {\n        bindings: CollageBindings,\n        controller: CollageController\n    }\n\n    angular\n        .module('pipCollage', [])\n        .component('pipCollage', CollageComponent);\n}\n\n","export class Attachment {\n    public constructor(id?: string, uri?: string, name?: string) {\n        this.id = id;\n        this.uri = uri;\n        this.name = name;\n    }\n    public id?: string;\n    public uri?: string;\n    public name?: string;\n} ","import { IAvatarDataService, IAvatarDataProvider, AvatarConfig } from './IAvatarDataService';\nimport { BlobInfo } from './BlobInfo';\n\nclass AvatarData implements IAvatarDataService {\n\n    constructor(\n        private _config: AvatarConfig,\n        private pipRest: pip.rest.IRestService\n    ) {\n         \"ngInject\";\n     }\n\n    public get AvatarRoute(): string {\n        return this._config.AvatarRoute;\n    }\n\n    public get ShowOnlyNameIcon(): boolean {\n        return this._config.ShowOnlyNameIcon;\n    }\n\n    public get DefaultInitial(): string {\n        return this._config.DefaultInitial;\n    }\n\n    public getAvatarUrl(id: any): string {\n        return this.pipRest.serverUrl + this._config.AvatarRoute + '/' + id;\n    }\n\n    public postAvatarUrl(): string {\n        return this.pipRest.serverUrl + this._config.AvatarRoute;\n    }\n\n    public deleteAvatar(id: string, successCallback?: () => void, errorCallback?: (error: any) => void): void {\n        let params = {};\n        params[this._config.AvatarFieldId] = id;\n        this.pipRest.getResource(this._config.AvatarResource).remove(\n            params,\n            null,\n            successCallback,\n            errorCallback\n        );\n    }\n\n    public createAvatar(data: any, successCallback?: (data: BlobInfo) => void,\n        errorCallback?: (error: any) => void, progressCallback?: (progress: number) => void): void {\n\n    }\n\n}\n\nclass AvatarDataProvider implements IAvatarDataProvider {\n    private _service: IAvatarDataService;\n    private _config: AvatarConfig;\n\n    constructor(\n        private pipRestProvider: pip.rest.IRestProvider\n    ) {\n        this._config = new AvatarConfig();\n        \n        this._config.AvatarRoute = '/api/1.0/avatars';\n        this._config.AvatarResource = 'avatars';\n        this._config.AvatarFieldId = 'avatar_id';\n        this._config.ShowOnlyNameIcon = false;\n        this._config.DefaultInitial = '&';\n    }\n\n    public get AvatarRoute(): string {\n        return this._config.AvatarRoute;\n    }\n\n    public set AvatarRoute(value: string) {\n        this._config.AvatarRoute = value;\n        this.pipRestProvider.registerOperation('avatars', this._config.AvatarRoute + '/:avatar_id');\n    }\n\n    public get AvatarResource(): string {\n        return this._config.AvatarResource;\n    }\n\n    public set AvatarResource(value: string) {\n        this._config.AvatarResource = value;\n    }\n\n    public get AvatarFieldId(): string {\n        return this._config.AvatarFieldId;\n    }\n\n    public set AvatarFieldId(value: string) {\n        this._config.AvatarFieldId = value;\n    }\n\n    public get ShowOnlyNameIcon(): boolean {\n        return this._config.ShowOnlyNameIcon;\n    }\n\n    public set ShowOnlyNameIcon(value: boolean) {\n        this._config.ShowOnlyNameIcon = value;\n    }\n\n    public get DefaultInitial(): string {\n        return this._config.DefaultInitial;\n    }\n\n    public set DefaultInitial(value: string) {\n        this._config.DefaultInitial = value;\n    }\n\n    public $get(\n        pipRest: pip.rest.IRestService\n    ) {\n        \"ngInject\";\n\n        if (this._service == null) {\n            this._service = new AvatarData(this._config, pipRest);\n        }\n\n        return this._service;\n    }\n\n}\n\n\nangular\n    .module('pipAvatarData', ['pipRest'])\n    .provider('pipAvatarData', AvatarDataProvider);\n\n\n","export class BlobInfo {\n\n    public constructor(id: string, group: string, name: string, size?: number,\n        content_type?: string, create_time?: Date, expire_time?: Date, completed?: boolean) {\n        this.id = id;\n        this.group = group;\n        this.name = name;\n        this.size = size;\n        this.content_type = content_type;\n        this.create_time = create_time;\n        this.expire_time = expire_time;\n        this.completed = completed;\n    }\n\n    /* Identification */\n    public id: string;\n    public group: string;\n    public name: string;\n\n    /* Content */\n    public size: number;\n    public content_type: string;\n    public create_time: Date;\n    public expire_time: Date;\n    public completed: boolean;\n}","export class DataPage<T> {\n    public constructor(data: T[] = null, total: number = null) {\n\t\tthis.total = total;\n\t\tthis.data = data;\n\t}\n\n    public total: number;\n    public data: T[];\n}","import { BlobInfo } from './BlobInfo';\n\nexport class AvatarConfig {\n    // custom avatar route\n    public AvatarRoute: string;\n    // custom avatar resource name\n    public AvatarResource: string;\n    public AvatarFieldId: string;\n    // show only first letter for name as avatar \n    public ShowOnlyNameIcon: boolean;\n    // default first name  letter\n    public DefaultInitial: string;\n}\n\nexport const colorClasses = [\n    'pip-avatar-color-0', 'pip-avatar-color-1', 'pip-avatar-color-2', 'pip-avatar-color-3',\n    'pip-avatar-color-4', 'pip-avatar-color-5', 'pip-avatar-color-6', 'pip-avatar-color-7',\n    'pip-avatar-color-8', 'pip-avatar-color-9', 'pip-avatar-color-10', 'pip-avatar-color-11',\n    'pip-avatar-color-12', 'pip-avatar-color-13', 'pip-avatar-color-14', 'pip-avatar-color-15'\n];\n\nexport const colors = [\n    'rgba(239,83,80,1)', 'rgba(236,64,122,1)', 'rgba(171,71,188,1)',\n    'rgba(126,87,194,1)', 'rgba(92,107,192,1)', 'rgba(3,169,244,1)',\n    'rgba(0,188,212,1)', 'rgba(0,150,136,1)', 'rgba(76,175,80,1)',\n    'rgba(139,195,74,1)', 'rgba(205,220,57,1)', 'rgba(255,193,7,1)',\n    'rgba(255,152,0,1)', 'rgba(255,87,34,1)', 'rgba(121,85,72,1)',\n    'rgba(96,125,139,1)'\n];\n\nexport interface IAvatarDataService {\n    AvatarRoute: string;\n    ShowOnlyNameIcon: boolean;\n    DefaultInitial: string;\n\n    getAvatarUrl(id: any): string;\n    postAvatarUrl(): string;\n\n    deleteAvatar(id: string, successCallback?: () => void, errorCallback?: (error: any) => void): void;\n    createAvatar(data: any, successCallback?: (data: BlobInfo) => void,\n        errorCallback?: (error: any) => void, progressCallback?: (progress: number) => void): void;\n}\n\nexport interface IAvatarDataProvider extends ng.IServiceProvider {\n    AvatarRoute: string;\n    AvatarResource: string;\n    DefaultInitial: string;\n    ShowOnlyNameIcon: boolean;\n    AvatarFieldId: string;    \n}\n","import { BlobInfo } from './BlobInfo';\nimport { DataPage } from './DataPage';\n\nexport class PictureConfig {\n    public PictureRoute: string;\n    public DefaultErrorIcon: string;\n    public ShowErrorIcon: boolean;\n}\n\nexport interface IPictureDataService {\n    PictureRoute: string;\n    DefaultErrorIcon: string;\n    ShowErrorIcon: boolean;\n\n    getPictureUrl(id: string): string;\n    postPictureUrl(): string\n    readPictures(params: any, successCallback?: (data: DataPage<BlobInfo>) => void, errorCallback?: (error: any) => void): angular.IPromise<any>\n    readPictureInfo(params: any, successCallback?: (data: BlobInfo) => void, errorCallback?: (error: any) => void): angular.IPromise<any>;\n    readPicture(id: string, successCallback?: (data: any) => void, errorCallback?: (error: any) => void): angular.IPromise<any>;\n    deletePicture(id: string, successCallback?: () => void, errorCallback?: (error: any) => void): void;    \n}\n\n\nexport interface IPictureDataProvider extends ng.IServiceProvider {\n    PictureRoute: string;\n    DefaultErrorIcon: string;\n    ShowErrorIcon: boolean;\n\n    getPictureUrl(id: string): string;\n}\n","export class Image {\n    title: string;\n    link: string;\n    thumbnail: string;\n}\n","import { Attachment } from './Attachment';\n\nexport class ImageSet {\n\n    public constructor(id: string, title: string, picIds?: string[], create_time?: Date) {\n        this.id = id;\n        this.title = title;\n        this.pics = [];\n        this.create_time = create_time;\n    }\n\n    /* Identification */\n    public id: string;\n\n    /* Automatically set fields */\n    public create_time: Date;\n\n    /* Content */\n    public title: string;\n    public pics?: Attachment[];\n\n    /* Search */\n    public tags?: string[];\n    public all_tags?: string[];\n}","import { IImageSetDataService } from './IImageSetDataService';\nimport { ImageSet } from './ImageSet';\nimport { DataPage } from './DataPage';\n\nclass ImageSetData implements IImageSetDataService {\n    private RESOURCE: string = 'imagesets';\n\n    constructor(\n        private pipRest: pip.rest.IRestService,\n        private pipFormat: pip.services.IFormat\n\n    ) {\n        \"ngInject\";\n    }\n\n    public readImageSets(params: any, successCallback?: (data: DataPage<ImageSet>) => void,\n        errorCallback?: (error: any) => void): ng.IPromise<any> {\n\n        params = params || {};\n        // if (params.filter) {\n        //     params.filer = this.pipFormat.filterToString(params.filer);\n        // }\n\n        return this.pipRest.getResource(this.RESOURCE).page(params, successCallback, errorCallback);\n    }\n\n    public readImageSet(id: string, successCallback?: (data: ImageSet) => void,\n        errorCallback?: (error: any) => void): ng.IPromise<any> {\n\n        return this.pipRest.getResource(this.RESOURCE).get(\n            { imagesets_id: id },\n            successCallback,\n            errorCallback\n        );\n    }\n\n    public updateImageSet(id: string, data: ImageSet, successCallback?: (data: ImageSet) => void,\n        errorCallback?: (error: any) => void): void {\n\n        this.pipRest.getResource(this.RESOURCE).update(\n            { imagesets_id: id },\n            data,\n            successCallback,\n            errorCallback\n        );\n\n    }\n\n    public createImageSet(data: ImageSet, successCallback?: (data: any) => void,\n        errorCallback?: (error: any) => void): void {\n\n        this.pipRest.getResource(this.RESOURCE).save(\n            null,\n            data,\n            successCallback,\n            errorCallback\n        );\n    }\n\n\n    public deleteImageSet(id: string, successCallback?: () => void,\n        errorCallback?: (error: any) => void): void {\n\n        this.pipRest.getResource(this.RESOURCE).remove(\n            { imagesets_id: id },\n            null,\n            successCallback,\n            errorCallback\n        );\n    }\n}\n\nangular\n    .module('pipImageSetData', ['pipRest'])\n    .service('pipImageSetData', ImageSetData);\n\n","import { IPictureDataService, IPictureDataProvider, PictureConfig } from './IPictureDataService';\nimport { BlobInfo } from './BlobInfo';\nimport { DataPage } from './DataPage';\n\nclass PictureData implements IPictureDataService {\n    private RESOURCE: string = 'picture';\n    private RESOURCE_INFO: string = 'pictureInfo';\n\n    constructor(\n        private _config: PictureConfig,\n        private pipFormat: pip.services.IFormat,\n        private pipRest: pip.rest.IRestService\n    ) {\n        \"ngInject\";\n    }\n\n    public get PictureRoute(): string {\n        return this._config.PictureRoute;\n    }\n\n    public get ShowErrorIcon(): boolean {\n        return this._config.ShowErrorIcon;\n    }\n    \n    public get DefaultErrorIcon(): string {\n        return this._config.DefaultErrorIcon;\n    }\n\n    public getPictureUrl(id: string): string {\n        return this.pipRest.serverUrl + this._config.PictureRoute + '/' + id;\n    }\n\n    public postPictureUrl(): string {\n        return this.pipRest.serverUrl + this._config.PictureRoute;\n    }\n\n    public readPictures(params: any, successCallback?: (data: DataPage<BlobInfo>) => void, errorCallback?: (error: any) => void): angular.IPromise<any> {\n        params = params || {};\n        if (params.filter) {\n            params.filer = this.pipFormat.filterToString(params.filer);\n        }\n\n        return this.pipRest.getResource(this.RESOURCE).page(params, successCallback, errorCallback);\n    }\n\n    public readPictureInfo(params: any, successCallback?: (data: BlobInfo) => void, errorCallback?: (error: any) => void): angular.IPromise<any> {\n        params = params || {};\n        if (params.filter) {\n            params.filer = this.pipFormat.filterToString(params.filer);\n        }\n\n        return this.pipRest.getResource(this.RESOURCE_INFO).get(params, successCallback, errorCallback);\n    }\n\n    public readPicture(id: string, successCallback?: (data: any) => void, errorCallback?: (error: any) => void): angular.IPromise<any> {\n\n        return this.pipRest.getResource(this.RESOURCE).get({\n            picture_id: id\n        }, successCallback, errorCallback);\n    }\n\n    public deletePicture(id: string, successCallback?: () => void, errorCallback?: (error: any) => void): void {\n        this.pipRest.getResource(this.RESOURCE).remove(\n            { picture_id: id },\n            null,\n            successCallback,\n            errorCallback\n        );\n    }\n}\n\nclass PictureDataProvider implements IPictureDataProvider {\n    private _service: IPictureDataService;\n    private _config: PictureConfig;\n\n    constructor(\n        private pipRestProvider: pip.rest.IRestProvider\n    ) {\n        this._config = new PictureConfig();\n\n        this._config.PictureRoute = '/api/1.0/blobs';\n        this._config.ShowErrorIcon = true;\n        this._config.DefaultErrorIcon = 'picture-no-border';\n    }\n\n    public get PictureRoute(): string {\n        return this._config.PictureRoute;\n    }\n\n    public getPictureUrl(id: string): string {\n        return this.pipRestProvider.serverUrl + this._config.PictureRoute + '/' + id;\n    }\n\n    public set PictureRoute(value: string) {\n        this._config.PictureRoute = value;\n\n        this.pipRestProvider.registerOperation('pictures', this._config.PictureRoute + '/:picture_id');\n    }\n\n    public get DefaultErrorIcon(): string {\n        return this._config.DefaultErrorIcon;\n    }\n\n    public set DefaultErrorIcon(value: string) {\n        this._config.DefaultErrorIcon = value;\n\n        this.pipRestProvider.registerOperation('pictures', this._config.PictureRoute + '/:picture_id');\n    }\n\n    public get ShowErrorIcon(): boolean {\n        return this._config.ShowErrorIcon;\n    }\n\n    public set ShowErrorIcon(value: boolean) {\n        this._config.ShowErrorIcon = value;\n    }\n\n    public $get(\n        pipRest: pip.rest.IRestService,\n        pipFormat: pip.services.IFormat\n    ) {\n        \"ngInject\";\n\n        if (this._service == null) {\n            this._service = new PictureData(this._config, pipFormat, pipRest);\n        }\n\n        return this._service;\n    }\n\n}\n\n\nangular\n    .module('pipPictureData', ['pipRest'])\n    .provider('pipPictureData', PictureDataProvider);\n","import './Attachment';\nimport './BlobInfo';\nimport './DataPage';\nimport './ImageSet';\nimport './Image';\n\nimport './AvatarDataService';\nimport './IAvatarDataService';\nimport './ImageSetDataService';\nimport './IImageSetDataService';\nimport './PictureDataService';\nimport './IPictureDataService';\n\nangular\n    .module('pipPictures.Data', [\n        'pipAvatarData', \n        'pipPictureData',\n        'pipImageSetData'\n    ]);\n\nexport * from './Attachment';\nexport * from './BlobInfo';\nexport * from './DataPage';\nexport * from './ImageSet';\nexport * from './Image';\nexport * from './IImageSetDataService';\nexport * from './IAvatarDataService';\nexport * from './IPictureDataService';\n","﻿import { GallerySearchDialogParams } from './IGallerySearchDialogService'\nimport { IImageSetDataService, IPictureDataService, DataPage, Attachment, ImageSet } from '../data';\n\n\n\nconst ConfigGallerySearchDialogTranslations = (pipTranslateProvider: pip.services.ITranslateProvider) => {\n    pipTranslateProvider.translations('en', {\n        'IMAGE_GALLERY': 'Add from image gallery',\n        'SEARCH_PICTURES': 'Search for pictures...',\n        'IMAGE_START_SEARCH': 'Images will appear here once you start searching'\n    });\n    pipTranslateProvider.translations('ru', {\n        'IMAGE_GALLERY': 'Добавить из галереи изображений',\n        'SEARCH_PICTURES': 'Поиск изображений...',\n        'IMAGE_START_SEARCH': 'Картинки появятся после начала поиска'\n    });\n}\n\nclass GallerySearchDialogImage {\n    public checked: boolean;\n    public url: string;\n    public thumbnail: any\n    public item: Attachment\n}\n\nclass GallerySearchDialogController extends GallerySearchDialogParams {\n\n    public theme: string;\n\n    public prevSearch: string = '';\n    private url: string;\n    public images: any[];\n    public imagesSearchResult: any[];\n    public search: string;\n    public transaction: pip.services.Transaction;\n\n    constructor(\n        private $log: ng.ILogService,\n        private $mdDialog: angular.material.IDialogService,\n        private $rootScope: ng.IRootScopeService,\n        private $timeout: ng.ITimeoutService,\n        private $mdMenu,\n        public multiple: boolean,\n        private $http: ng.IHttpService,\n        private pipRest: pip.rest.IRestService,\n        private pipTransaction: pip.services.ITransactionService,\n        private pipImageSetData: IImageSetDataService,\n        private pipPictureData: IPictureDataService\n    ) {\n        \"ngInject\";\n\n        super();\n\n        // this.url = this.pipRest.serverUrl + '/api/images/search';\n        this.images = [];\n        this.theme = this.$rootScope[pip.themes.ThemeRootVar];\n        this.search = '';\n        this.imagesSearchResult = [];\n        this.transaction = this.pipTransaction.create('search');\n\n        this.focusSearchText();\n    }\n\n    public onSearchClick(): void {\n        if (this.transaction.busy()) return;\n\n        if (this.search == '' || this.search == this.prevSearch) return;\n\n        this.prevSearch = this.search;\n        this.imagesSearchResult = [];\n\n        // let requestUrl: string = this.url + '?q=' + this.search;\n\n        let transactionId: string = this.transaction.begin('ENTERING');\n        if (!transactionId) return;\n\n        this.pipImageSetData.readImageSets(\n            {\n                Search: this.search\n            },\n            (result: DataPage<ImageSet>) => {\n                if (this.transaction.aborted(transactionId)) return;\n\n                _.each(result.data, (item: ImageSet) => { // todo add type to image_set\n                    _.each(item.pics, (img: Attachment) => {\n                        let newImage: GallerySearchDialogImage = {\n                            checked: false,\n                            url: img.uri ? img.uri : this.pipPictureData.getPictureUrl(img.id),\n                            item: img,\n                            // todo ?? thumbnail\n                            thumbnail: img.uri ? img.uri : this.pipPictureData.getPictureUrl(img.id)\n                        };\n                        this.imagesSearchResult.push(newImage);\n                    })\n\n                })\n\n                this.transaction.end();\n            },\n            (error) => {\n                this.transaction.end(error);\n                this.$log.error(error);\n            }\n        )\n    } Attachment\n\n    public onStopSearchClick(): void {\n        this.transaction.abort();\n        this.prevSearch = '';\n    }\n\n    public onKeyPress($event: KeyboardEvent): void {\n        if ($event.keyCode === 13) {\n            this.onSearchClick();\n        }\n    }\n\n    public onImageClick(image: GallerySearchDialogImage): void {\n        if (this.transaction.busy()) { return; }\n\n        image.checked = !image.checked;\n\n        if (this.multiple) {\n            if (image.checked) {\n                this.images.push(image);\n            } else {\n                _.remove(this.images, { url: image.url });\n            }\n        } else {\n            if (image.checked) {\n                if (this.images.length > 0) {\n                    this.images[0].checked = false;\n                    this.images[0] = image;\n                } else {\n                    this.images.push(image);\n                }\n            } else {\n                this.images = [];\n            }\n        }\n    }\n\n    public onAddClick(): void {\n        if (this.transaction.busy()) { return; }\n\n        let result: Attachment[] = [];\n        this.images.forEach((image: GallerySearchDialogImage) => {\n            if (image.checked) {\n                result.push(image.item);\n            }\n        });\n        this.$mdDialog.hide(result);\n    }\n\n    public onCancelClick(): void {\n        this.$mdDialog.cancel();\n    }\n\n    public addButtonDisabled(): boolean {\n        return this.images.length == 0 || this.transaction.busy();\n    }\n\n    public focusSearchText(): void {\n        setTimeout(() => {\n            let element = $('.pip-gallery-search-dialog .search-images');\n            if (element.length > 0) {\n                element.focus();\n            }\n        }, 0);\n    }\n}\n\n\n\nangular\n    .module('pipGallerySearchDialog')\n    .config(ConfigGallerySearchDialogTranslations)\n    .controller('pipGallerySearchController', GallerySearchDialogController);","import { IGallerySearchDialogService, GallerySearchDialogParams } from './IGallerySearchDialogService';\nimport { Attachment } from '../data';\n\nclass GallerySearchDialogService implements IGallerySearchDialogService {\n    private _mdDialog: angular.material.IDialogService;\n\n    constructor($mdDialog: angular.material.IDialogService) {\n        this._mdDialog = $mdDialog;\n    }\n\n    public show(params: GallerySearchDialogParams, successCallback?: (result: Attachment[]) => void, cancelCallback?: () => void) {\n        this._mdDialog.show({\n            templateUrl: 'gallery_search_dialog/GallerySearchDialog.html',\n            clickOutsideToClose: true,\n            controller: 'pipGallerySearchController',\n            controllerAs: '$ctrl',\n            locals: params\n        })\n            .then(\n            (result: Attachment[]) => {\n                if (successCallback) {\n                    successCallback(result);\n                }\n            });\n    }\n\n}\n\nangular\n    .module('pipGallerySearchDialog')\n    .service('pipGallerySearchDialog', GallerySearchDialogService);","import { Attachment } from '../data';\n\nexport class GallerySearchDialogParams {\n    public multiple: boolean;\n}\n\nexport interface IGallerySearchDialogService {\n    show(params: GallerySearchDialogParams, successCallback?: (result: Attachment[][]) => void, cancelCallback?: () => void): any;\n}\n\n","angular\n    .module('pipGallerySearchDialog',\n        ['ngMaterial', 'pipPictures.Templates', 'pipCommonRest']);\n\nimport './IGallerySearchDialogService';\nimport './GallerySearchDialogService';\nimport './GallerySearchDialogController';\n\n\nexport * from './IGallerySearchDialogService';\n\n","import './data';\nimport './rest';\n\nimport './camera_dialog';\nimport './add_image/AddImage';\nimport './add_image/AddImageOption';\nimport './add_image/AddImageResult';\nimport './avatar/Avatar';\nimport './avatar_edit/AvatarEdit';\nimport './collage/Collage';\nimport './gallery_search_dialog';\nimport './picture/Picture';\nimport './picture_edit/PictureEdit';\nimport './picture_list_edit/PictureListEdit';\nimport './picture_url_dialog';\nimport './utilities';\n\nangular\n    .module('pipPictures', [\n        'pipControls',\n\n        'pipPictures.Data',\n        'pipPictures.Rest',\n        'pipCameraDialog',\n        'pipGallerySearchDialog',\n        'pipPictureUrlDialog',\n        'pipAddImage',\n        'pipAvatar',\n        'pipPictureUtils',\n        'pipPicturePaste',\n        'pipAvatarEdit',\n        'pipPicture',\n        'pipPictureEdit',\n        'pipCollage',\n        'pipPictureListEdit',\n\n    ]);\n\nexport * from './avatar/Avatar';\nexport * from './data';\nexport * from './avatar_edit/AvatarEdit';\nexport * from './add_image/AddImageOption';\nexport * from './add_image/AddImageResult';\nexport * from './collage/Collage';\nexport * from './camera_dialog';\nexport * from './gallery_search_dialog';\nexport * from './picture_edit/PictureEdit';\nexport * from './picture_list_edit/PictureListEdit';\nexport * from './picture_url_dialog';\nexport * from './utilities';\n","import { IPictureUtilsService } from '../utilities/IPictureUtils';\nimport { IPictureDataService, Attachment } from '../data';\n\n{\n    interface IPictureBindings {\n        [key: string]: any;\n\n        src: any;\n        pictureId: any;\n        pipPicture: any;\n        defaultIcon: any;\n        pipRebind: any;\n    }\n\n    const PictureBindings: IPictureBindings = {\n        src: '<?pipSrc',\n        pictureId: '<?pipPictureId',\n        pipPicture: '<?',\n        defaultIcon: '<?pipDefaultIcon',\n        pipRebind: '<?'\n    }\n\n    class PictureBindingsChanges implements ng.IOnChangesObject, IPictureBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        src: ng.IChangesObject<string>;\n        pictureId: ng.IChangesObject<string>;\n        pipPicture: ng.IChangesObject<Attachment>;\n        defaultIcon: ng.IChangesObject<string>;\n        pipRebind: ng.IChangesObject<boolean>;\n    }\n\n    class PictureController {\n        private imageElement: any;\n        private defaultBlock: any;\n\n        public src: string;\n        public pictureId: string;\n        public pipPicture: Attachment;\n        public defaultIcon: string;\n        public pipRebind: boolean;\n\n        private postLink: boolean = false;\n        public errorText: string;\n        constructor(\n            private $scope: ng.IScope,\n            private $rootScope: ng.IRootScopeService,\n            private $element: JQuery,\n            private pipPictureUtils: IPictureUtilsService,\n            private pipPictureData: IPictureDataService\n        ) {\n            \"ngInject\";\n\n            this.errorText = 'PICTURE_ERROR_LOAD';\n\n            // Add class\n            this.$element.addClass('pip-picture');\n        }\n\n        public $postLink() {\n            this.imageElement = this.$element.children('img');\n            this.defaultBlock = this.$element.children('div');\n            this.defaultIcon = this.defaultIcon ? this.defaultIcon : this.pipPictureData.DefaultErrorIcon;\n            this.postLink = true;\n            this.bindControl();\n        }\n\n        public $onChanges(changes: PictureBindingsChanges): void {\n            if (changes.pipRebind && changes.pipRebind.currentValue !== changes.pipRebind.previousValue) {\n                this.pipRebind = changes.pipRebind.currentValue;\n            }\n\n            let isDataChange: boolean = false;\n            if (this.pipRebind) {\n                if (changes.src && changes.src.currentValue !== changes.src.previousValue) {\n                    this.src = changes.src.currentValue;\n                    isDataChange = true;\n                }\n\n                if (changes.pictureId && changes.pictureId.currentValue !== changes.pictureId.previousValue) {\n                    this.pictureId = changes.pictureId.currentValue;\n                    isDataChange = true;\n                }\n\n                if (changes.pipPicture && !_.isEqual(changes.pipPicture.currentValue, changes.pipPicture.previousValue)) {\n                    this.pipPicture = changes.pipPicture.currentValue;\n                    isDataChange = true;\n                }\n\n                if (changes.defaultIcon && changes.defaultIcon.currentValue !== changes.defaultIcon.previousValue) {\n                    this.defaultIcon = changes.defaultIcon.currentValue;\n                    this.defaultIcon = this.defaultIcon ? this.defaultIcon : this.pipPictureData.DefaultErrorIcon;\n                }\n            }\n\n            if (isDataChange && this.postLink) {\n                this.bindControl();\n            }\n        }\n\n        // Clean up url to remove broken icon\n        public onImageError($event: JQueryEventObject): void {\n            if (this.pipPictureData.ShowErrorIcon) {\n                this.$scope.$apply(() => {\n                    this.imageElement.css('display', 'none');\n                    this.defaultBlock.css('display', 'block');\n                });\n            } else {\n                this.$scope.$apply(() => {\n                    this.defaultBlock.css('display', 'none');\n                });\n            }\n        }\n\n        // When image is loaded resize/reposition it\n        public onImageLoad($event: JQueryEventObject): void {\n            let image: any = $($event.target);\n            this.pipPictureUtils.setImageMarginCSS(this.$element, image);\n            this.$element.children('div').css('display', 'none');\n        }\n\n        public bindControl(): void {\n            let url;\n            if (this.pictureId) {\n                url = this.pipPictureData.getPictureUrl(this.pictureId);\n                this.imageElement.attr('src', url);\n            } else if (this.src) {\n                this.imageElement.attr('src', this.src);\n            } else if (this.pipPicture) {\n                url = this.pipPicture.uri ? this.pipPicture.uri : this.pipPictureData.getPictureUrl(this.pipPicture.id);\n                this.imageElement.attr('src', url);\n            }\n        }\n    }\n\n    const PictureComponent: ng.IComponentOptions = {\n        bindings: PictureBindings,\n        template: '<img ui-event=\"{ error: \\'$ctrl.onImageError($event)\\', load: \\'$ctrl.onImageLoad($event)\\' }\"/>'\n        + '<div class=\"pip-picture-error\"><md-icon md-svg-icon=\"icons:{{$ctrl.defaultIcon}}\"></md-icon><div class=\"pip-default-text\"><span>{{ $ctrl.errorText | translate }}</span></div></div>',\n        controller: PictureController\n    }\n\n    angular\n        .module('pipPicture', [])\n        .component('pipPicture', PictureComponent);\n}\n","import { IPictureUtilsService } from '../utilities/IPictureUtils';\nimport { PicturePaste } from '../utilities/PicturePaste';\nimport { IPictureDataService, Attachment } from '../data';\nimport { AddImageResult } from '../add_image/AddImageResult';\n\nexport class PictureEditControl {\n    public reset: (afterDeleting?: boolean) => void;\n    public save: (successCallback?: (response?: Attachment) => void, errorCallback?: (error?: any) => void) => void;\n    public abort: () => void;\n    public error?: any;\n\n    public disabled: boolean = false;\n    public url: string = '';\n    public uriData: any;\n    public uri: string;\n    public id: string;\n    public name: string;\n    public progress: number = 0;\n    public uploaded: boolean = false;\n    public uploading: boolean = false;\n    public upload: boolean = false;\n    public loaded: boolean = false;\n    public file: any = null;\n    public state: string = PictureStates.Original;\n}\n\nexport class PictureStates {\n    static Original: string = 'original';\n    static Copied: string = 'copied';\n    static Changed: string = 'changed';\n    static Deleted: string = 'deleted';\n    static Error: string = 'error';\n}\n\n{\n\n    const ConfigPictureEditTranslations = (pipTranslateProvider: pip.services.ITranslateProvider) => {\n        pipTranslateProvider.translations('en', {\n            ERROR_WRONG_IMAGE_FILE: 'Incorrect image file. Please, choose another one',\n            PICTURE_EDIT_TEXT: 'Click here to upload a picture',\n            PICTURE_ERROR_LOAD: 'Error image loading'\n        });\n        pipTranslateProvider.translations('ru', {\n            ERROR_WRONG_IMAGE_FILE: 'Неправильный файл с изображением. Выберете другой файл',\n            PICTURE_EDIT_TEXT: 'Нажмите сюда для загрузки картинки',\n            PICTURE_ERROR_LOAD: 'Ошибка загрузки картинки'\n        });\n    }\n\n\n    class SenderEvent {\n        sender: PictureEditControl;\n    }\n\n    class PictureEvent {\n        $event: SenderEvent;\n        $control: PictureEditControl;\n    }\n\n    interface IPictureEditBindings {\n        [key: string]: any;\n\n        ngDisabled: any;\n        pipCreated: any;\n        pipChanged: any;\n        pipPictureId: any;\n        pipPicture: any;\n        pipAddedPicture: any;\n        text: any;\n        icon: any;\n        pipRebind: any;\n    }\n\n    const PictureEditBindings: IPictureEditBindings = {\n        ngDisabled: '<?',\n        pipCreated: '&?',\n        pipChanged: '&?',\n        pipPictureId: '=?',\n        pipPicture: '=?',\n        pipAddedPicture: '&?',\n        text: '<?pipDefaultText',\n        icon: '<?pipDefaultIcon',\n        pipRebind: '<?',\n    }\n\n    class PictureEditBindingsChanges implements ng.IOnChangesObject, IPictureEditBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        ngDisabled: ng.IChangesObject<boolean>;\n        pipCreated: ng.IChangesObject<(params: PictureEvent) => ng.IPromise<void>>;\n        pipChanged: ng.IChangesObject<(params: PictureEvent) => ng.IPromise<void>>;\n        pipPictureId: ng.IChangesObject<string>;\n        pipPicture: ng.IChangesObject<Attachment>;\n        pipAddedPicture: ng.IChangesObject<() => boolean>;\n        text: ng.IChangesObject<string>;\n        icon: ng.IChangesObject<string>;\n        pipRebind: ng.IChangesObject<boolean>;\n    }\n\n    class PictureEditController {\n        private controlElement: any;\n        private inputElement: any;\n        private pipPicturePaste: PicturePaste;\n        private pictureStartState: string;\n\n        public ngDisabled: boolean;\n        public pipCreated: (params: PictureEvent) => void;\n        public pipChanged: (params: PictureEvent) => void;\n        public text: string;\n        public icon: string;\n        public pipPictureId: string;\n        public pipPicture: Attachment;\n        public pipAddedPicture: () => boolean;\n        public pipRebind: boolean;\n\n        public multiUpload: boolean;\n        public errorText: string;\n\n        public control: PictureEditControl;\n\n        constructor(\n            private $log: ng.ILogService,\n            private $scope: ng.IScope,\n            private $rootScope: ng.IRootScopeService,\n            private $element: JQuery,\n            private pipPictureData: IPictureDataService,\n            private pipPictureUtils: IPictureUtilsService,\n            private $timeout: ng.ITimeoutService,\n            private pipFileUpload: pip.files.IFileUploadService\n        ) {\n            \"ngInject\";\n            this.pipPicturePaste = new PicturePaste($timeout);\n            this.pictureStartState = this.pipAddedPicture ? PictureStates.Copied : PictureStates.Original;\n\n            this.text = this.text || 'PICTURE_EDIT_TEXT';\n            this.icon = this.icon || 'picture-no-border';\n            this.errorText = 'PICTURE_ERROR_LOAD';\n\n            this.multiUpload = false;\n\n            this.control = new PictureEditControl();\n            this.control.state = this.pictureStartState;\n            this.control.reset = (afterDeleting: boolean) => {\n                this.resetImage(afterDeleting);\n            }\n            this.control.save = (successCallback?: (response?: Attachment) => void, errorCallback?: (error?: any) => void): void => {\n                this.saveImage(successCallback, errorCallback);\n            }\n            this.control.abort = (): void => {\n                this.abort();\n            }\n            // Add class\n            $element.addClass('pip-picture-edit');\n        }\n\n        public $postLink() {\n            this.controlElement = this.$element.children('.pip-picture-upload');\n            this.inputElement = this.controlElement.children('input[type=file]');\n            // Initialize control\n            this.control.reset();\n\n            // Execute callback\n            if (this.pipCreated) {\n                this.pipCreated({\n                    $event: { sender: this.control },\n                    $control: this.control\n                });\n            }\n        }\n\n        public abort(): void {\n            if (this.control.uploading) {\n                this.control.uploaded = false;\n                this.control.uploading = false;\n                this.control.progress = 0;\n                this.control.upload = null;\n            }\n        }\n\n        public $onChanges(changes: PictureEditBindingsChanges): void {\n            if (changes.pipRebind && changes.pipRebind.currentValue !== changes.pipRebind.previousValue) {\n                this.pipRebind = changes.pipRebind.currentValue;\n            }\n\n            let change = false;\n\n            if (changes.ngDisabled && changes.ngDisabled.currentValue !== changes.ngDisabled.previousValue) {\n                this.ngDisabled = changes.ngDisabled.currentValue;\n                this.control.disabled = this.ngDisabled; // ???\n                if (this.inputElement) {\n                    this.inputElement.attr('disabled', this.control.disabled);\n                }\n            }\n\n            if (this.pipRebind) {\n                if (changes.pipPictureId && changes.pipPictureId.currentValue !== this.pipPictureId) {\n                    this.pipPictureId = changes.pipPictureId.currentValue;\n                    change = true;\n                }\n            }\n\n            if (this.pipRebind) {\n                if (changes.pipPicture && !_.isEqual(changes.pipPicture.currentValue, this.pipPicture)) {\n                    this.pipPicture = changes.pipPicture.currentValue;\n                    change = true;\n                }\n            }\n            if (change) {\n                this.control.reset();\n            }\n        }\n\n        public resetImage(afterDeleting: boolean): void {\n            this.control.progress = 0;\n            this.control.uploading = false;\n            this.control.uploaded = false;\n            this.control.file = null;\n            this.control.state = this.pictureStartState;\n            this.control.url = '';\n            this.control.uri = null;\n            this.control.name = null;\n            this.control.uriData = null;\n            this.control.id = null;\n            var url = '';\n            if (!afterDeleting) {\n                if (this.pipPictureId) {\n                    url = this.pipPictureData.getPictureUrl(this.pipPictureId);\n                } else if (this.pipPicture) {\n                    url = this.pipPicture.uri ? this.pipPicture.uri : this.pipPicture.id ? this.pipPictureData.getPictureUrl(this.pipPicture.id) : null;\n                    this.control.uri = this.pipPicture.uri;\n                    this.control.name = this.pipPicture.name;\n                    this.control.id = this.pipPicture.id;\n                }\n                if (!url) return;\n\n                this.control.url = url;\n                this.control.uploaded = true;\n                this.onChange();\n            } else {\n                this.onChange();\n            }\n        }\n\n        public onFocus(): void {\n            this.pipPicturePaste.addPasteListener((item) => {\n                this.readItemLocally(item.url, item.uriData, item.file, item.picture);\n            });\n        }\n\n        public onBlur(): void {\n            this.pipPicturePaste.removePasteListener();\n        };\n\n        public savePicture(successCallback?: (response?: Attachment) => void, errorCallback?: (error?: any) => void): void {\n            if (this.control.id) {\n                this.control.uploading = false;\n                this.pipPicture = {\n                    id: this.control.id,\n                    uri: this.control.uri,\n                    name: this.control.name\n                }\n                this.pictureStartState = PictureStates.Original;\n                this.control.reset();\n                if (successCallback) {\n                    successCallback(this.pipPicture);\n                }\n            }\n            else if (this.control.file !== null) {\n                this.control.uploading = true;\n                this.pipFileUpload.upload(\n                    this.control.file,\n                    this.pipPictureData.postPictureUrl(),\n                    (data: any, error: any) => {\n                        if (!error) {\n                            this.pipPictureId = data.id;\n                            this.pipPicture = {\n                                id: data.id,\n                                uri: null,\n                                name: data.name\n                            }\n                            this.pictureStartState = PictureStates.Original;\n                            this.control.reset();\n                            if (successCallback) {\n                                successCallback(this.pipPicture);\n                            }\n                        } else {\n                            this.control.uploading = false;\n                            this.control.upload = false;\n                            this.control.progress = 0;\n                            this.pictureStartState = PictureStates.Error;\n                            if (errorCallback) {\n                                errorCallback(error);\n                            } else {\n                                this.$log.error(error);\n                            }\n                        }\n                    },\n                    (state: pip.files.FileUploadState, progress: number) => {\n                        this.control.progress = progress;\n                    }\n                );\n            } else if (this.control.uri && this.pipPicture) {\n                this.control.uploading = false;\n                if (this.control.uri) {\n                    this.pipPicture = {\n                        id: this.control.id,\n                        uri: this.control.uri,\n                        name: this.control.name\n                    }\n                    this.pictureStartState = PictureStates.Original;\n                    this.control.reset();\n                    if (successCallback) {\n                        successCallback(this.pipPicture);\n                    }\n                }\n            }\n        }\n\n        public deletePicture(successCallback?: (response?: any) => void, errorCallback?: (error?: any) => void): void {\n            if (this.pipPictureId) {\n                this.pipPictureData.deletePicture(\n                    this.pipPictureId,\n                    () => {\n                        this.pipPictureId = null;\n                        this.control.reset(true);\n\n                        if (successCallback) successCallback();\n                    },\n                    (error: any) => {\n                        this.control.uploading = false;\n                        this.control.upload = false;\n                        this.control.progress = 0;\n                        this.control.state = PictureStates.Error;\n\n                        if (errorCallback) {\n                            errorCallback(error);\n                        } else {\n                            this.$log.error(error);\n                        }\n                    });\n            } else {\n                this.control.uploading = false;\n                this.pipPicture = {\n                    id: null,\n                    uri: null,\n                    name: null\n                }\n\n                this.control.reset(true);\n                if (successCallback) successCallback(this.pipPicture);\n            }\n        }\n\n        public saveImage(successCallback?: (response?: any) => void, errorCallback?: (error?: any) => void): void {\n            // Process changes of the image\n            if (this.control.state == PictureStates.Changed) {\n                this.savePicture(successCallback, errorCallback);\n            }\n            // Process deletion of the image\n            else if (this.control.state == PictureStates.Deleted) {\n                this.deletePicture(successCallback, errorCallback);\n            }\n            // Process copied of the image\n            else if (this.control.state == PictureStates.Copied) {\n                this.pipPicture = {\n                    id: this.control.id,\n                    name: this.control.name,\n                    uri: this.control.uri\n                }\n                this.pictureStartState = PictureStates.Original;\n                this.control.reset();\n                successCallback(this.pipPicture);\n            }\n            // Process if no changes were made\n            else {\n                if (successCallback) {\n                    if (this.pipPicture) {\n                        successCallback(this.pipPicture);\n                    } else {\n                        successCallback(this.pipPictureId);\n                    }\n                }\n            }\n        }\n\n        // Visual publics\n        public empty(): boolean {\n            return (this.control.url == '' && !this.control.uploading);\n        }\n\n        public isUpdated(): boolean {\n            return this.control.state != PictureStates.Original;\n        }\n\n        // Process user events\n        public readItemLocally(url, uriData, file, picture): void {\n            if (picture) {\n                this.control.file = null;\n                this.control.name = picture.name;\n                this.control.uri = picture.uri;\n                this.control.id = picture.id;\n                this.control.uriData = null;\n                this.control.url = picture.uri ? picture.uri : picture.id ? this.pipPictureData.getPictureUrl(picture.id) : '';\n                this.control.state == PictureStates.Copied\n            } else {\n                this.control.file = file;\n                this.control.name = file ? file.name : url ? url.split('/').pop() : null;\n                this.control.url = !file && url ? url : uriData ? uriData : '';\n                this.control.uri = !file && url ? url : null;\n                this.control.uriData = uriData;\n                this.control.id = null;\n                this.control.state = PictureStates.Changed;\n            }\n            this.onChange();\n        }\n\n        public onDeleteClick($event: JQueryEventObject): void {\n            $event.stopPropagation();\n\n            this.controlElement.focus();\n\n            this.control.file = null;\n            this.control.url = '';\n            this.control.uri = null;\n            this.control.uriData = null;\n            this.control.name = null;\n            this.control.id = null;\n            if (this.control.state != PictureStates.Copied) this.control.state = PictureStates.Deleted;\n\n            this.onChange();\n        }\n\n        public onKeyDown($event: KeyboardEvent): void {\n            if ($event.keyCode == 13 || $event.keyCode == 32) {\n                // !! Avoid clash with $apply()\n                setTimeout(() => {\n                    this.controlElement.trigger('click');\n                }, 0);\n            } else if ($event.keyCode == 46 || $event.keyCode == 8) {\n                this.control.file = null;\n                this.control.url = '';\n                this.control.state = PictureStates.Deleted;\n                this.onChange();\n            } else if ($event.keyCode == 27) {\n                this.control.reset();\n            }\n        }\n\n        // Clean up url to remove broken icon\n        public onImageError($event: JQueryEventObject): void {\n            this.$scope.$apply(() => {\n                this.control.url = '';\n                let image = $($event.target);\n                this.control.state = PictureStates.Error;\n                this.pipPictureUtils.setErrorImageCSS(image, { width: 'auto', height: '100%' });\n            });\n        }\n\n        // When image is loaded resize/reposition it\n        public onImageLoad($event): void {\n            let image = $($event.target);\n            let container: any = {}; //JQuery = _.cloneDeep(this.controlElement);\n            container.clientWidth = 80;\n            container.clientHeight = 80;\n            this.pipPictureUtils.setImageMarginCSS(container, image);\n            this.control.uploading = false;\n        }\n\n        // On change event\n        public onChange(): void {\n            if (this.pipChanged) {\n                this.pipChanged({\n                    $event: { sender: this.control },\n                    $control: this.control\n                });\n            }\n        }\n\n    }\n\n    const PictureEditComponent: ng.IComponentOptions = {\n        bindings: PictureEditBindings,\n        templateUrl: 'picture_edit/PictureEdit.html',\n        controller: PictureEditController\n    }\n\n    angular\n        .module('pipPictureEdit', ['ui.event', 'pipPicturePaste',\n            'pipTranslate', 'angularFileUpload', 'pipPictures.Templates'])\n        .config(ConfigPictureEditTranslations)\n        .component('pipPictureEdit', PictureEditComponent);\n}\n\n","import { IPictureUtilsService } from '../utilities/IPictureUtils';\nimport { PicturePaste } from '../utilities/PicturePaste';\nimport { IPictureDataService, Attachment, BlobInfo } from '../data';\n\nlet async = require('async');\n\nexport class PictureListEditItem {\n    public pin: number;\n    public id: string;\n    public uri: string;\n    public name: string;\n    public url: string;\n    public uriData: any;\n    public uploading: boolean;\n    public uploaded: boolean;\n    public progress: number;\n    public file: any;\n    public upload?: any;\n    public state: string;\n    public loaded?: boolean;\n}\n\nexport class PictureListEditControl {\n    public uploading: number = 0;\n    public items: PictureListEditItem[];\n    public reset: () => void;\n    public save: (successCallback?: (data?: Attachment[]) => void, errorCallback?: (error?: PictureUploadErrors[]) => void) => void;\n    public abort: () => void;\n    public error?: any;\n}\n\n\nexport class PictureListEditStates {\n    static Added: string = 'added';\n    static Original: string = 'original';\n    static Copied: string = 'copied';\n    static Changed: string = 'changed';\n    static Deleted: string = 'deleted';\n    static Error: string = 'error';\n}\n\nexport class PictureUploadErrors {\n    id: string;\n    uri: string;\n    name: string;\n}\n\n{\n\n    const ConfigPictureListEditTranslations = (pipTranslateProvider: pip.services.ITranslateProvider) => {\n        pipTranslateProvider.translations('en', {\n            'PICTURE_LIST_EDIT_TEXT': 'Click here to add a picture',\n            'ERROR_TRANSACTION_IN_PROGRESS': 'Transaction is in progress. Please, wait until it is finished or abort',\n            'ERROR_IMAGE_PRELOADING': 'Image loading error. The picture can not be saved'\n        });\n        pipTranslateProvider.translations('ru', {\n            'PICTURE_LIST_EDIT_TEXT': 'Нажмите сюда чтобы добавить картинку',\n            'ERROR_TRANSACTION_IN_PROGRESS': 'Транзакция еще не завершена. Подождите окончания или прервите её',\n            'ERROR_IMAGE_PRELOADING': 'Ошибка при загрузки картинки. Картинка не сохранена.'\n        });\n    }\n\n\n    class SenderEvent {\n        sender: PictureListEditControl;\n    }\n\n    class PictureEvent {\n        $event: SenderEvent;\n        $control: PictureListEditControl;\n    }\n\n    interface IPictureListEditBindings {\n        [key: string]: any;\n\n        ngDisabled: any;\n        pipCreated: any;\n        pipChanged: any;\n        pictures: any;\n        pipAddedPicture: any;\n        text: any;\n        icon: any;\n        pipRebind: any;\n    }\n\n    const PictureListEditBindings: IPictureListEditBindings = {\n        ngDisabled: '<?',\n        pipCreated: '&?',\n        pipChanged: '&?',\n        pictures: '=?pipPictures',\n        pipAddedPicture: '&?',\n        text: '<?pipDefaultText',\n        icon: '<?pipDefaultIcon',\n        pipRebind: '<?',\n    }\n\n    class PictureListEditBindingsChanges implements ng.IOnChangesObject, IPictureListEditBindings {\n        [key: string]: ng.IChangesObject<any>;\n\n        ngDisabled: ng.IChangesObject<boolean>;\n        pipCreated: ng.IChangesObject<(params: PictureEvent) => ng.IPromise<void>>;\n        pipChanged: ng.IChangesObject<(params: PictureEvent) => ng.IPromise<void>>;\n        pictures: ng.IChangesObject<Attachment[]>;\n        pipAddedPicture: ng.IChangesObject<() => boolean>;\n        text: ng.IChangesObject<string>;\n        icon: ng.IChangesObject<string>;\n        pipRebind: ng.IChangesObject<boolean>;\n    }\n\n    class PictureListEditController {\n        private controlElement: any;\n        private pipPicturePaste: PicturePaste;\n        private pictureStartState: string;\n        private cancelQuery: any;\n\n        public ngDisabled: boolean;\n        public pipCreated: (params: PictureEvent) => void;\n        public pipChanged: (params: PictureEvent) => void;\n        public text: string;\n        public icon: string;\n        public pictures: Attachment[];\n        public pipAddedPicture: () => boolean;\n        public pipRebind: boolean;\n\n        public control: PictureListEditControl;\n        private itemPin: number;\n        private errorText: string;\n\n        constructor(\n            private $log: ng.ILogService,\n            private $scope: ng.IScope,\n            private $rootScope: ng.IRootScopeService,\n            private $element: JQuery,\n            private pipPictureUtils: IPictureUtilsService,\n            private $timeout: ng.ITimeoutService,\n            private pipFileUpload: pip.files.IFileUploadService,\n            private pipRest: pip.rest.IRestService,\n            private pipPictureData: IPictureDataService\n        ) {\n            \"ngInject\";\n\n            this.itemPin = 0;\n            this.pipPicturePaste = new PicturePaste($timeout);\n            this.pictureStartState = this.toBoolean(this.pipAddedPicture) ? PictureListEditStates.Copied : PictureListEditStates.Original;\n\n            this.text = this.text || 'PICTURE_LIST_EDIT_TEXT';\n            this.icon = this.icon || 'picture-no-border';\n            this.errorText = 'PICTURE_ERROR_LOAD';\n\n            this.control = new PictureListEditControl();\n            this.control.uploading = 0;\n            this.control.items = [];\n            this.control.reset = () => {\n                this.reset();\n            }\n            this.control.save = (successCallback?: (data?: Attachment[]) => void, errorCallback?: (error?: PictureUploadErrors[]) => void): void => {\n                this.save(successCallback, errorCallback);\n            }\n            this.control.abort = (): void => {\n                this.abort();\n            }\n            // Add class\n            $element.addClass('pip-picture-list-edit');\n        }\n\n        private toBoolean(value: any): boolean {\n            if (value == null) {\n                return false;\n            }\n            if (!value) {\n                return false;\n            }\n            value = value.toString().toLowerCase();\n\n            return value == '1' || value == 'true';\n        }\n\n        public filterItem(item: PictureListEditItem): boolean {\n            return item.state != PictureListEditStates.Deleted;\n        }\n\n        public $postLink() {\n            this.controlElement = this.$element.find('.pip-picture-drop')\n\n            // Initialize control\n            this.control.reset();\n            // Execute callback\n            if (this.pipCreated) {\n                this.pipCreated({\n                    $event: { sender: this.control },\n                    $control: this.control\n                });\n            }\n        }\n\n        private removeItem(item: PictureListEditItem): void {\n            if (item.state === PictureListEditStates.Added || item.state === PictureListEditStates.Copied) {\n                let index = _.findIndex(this.control.items, { pin: item.pin });\n                if (index > -1) {\n                    this.control.items.splice(index, 1);\n                }\n            } else {\n                item.state = PictureListEditStates.Deleted;\n            }\n        }\n\n        public $onChanges(changes: PictureListEditBindingsChanges): void {\n            if (changes.pipRebind && changes.pipRebind.currentValue !== changes.pipRebind.previousValue) {\n                this.pipRebind = changes.pipRebind.currentValue;\n            }\n\n            if (changes.ngDisabled && changes.ngDisabled.currentValue !== changes.ngDisabled.previousValue) {\n                this.ngDisabled = changes.ngDisabled.currentValue;\n            }\n\n            if (this.pipRebind) {\n                if (changes.pictures && !_.isEqual(changes.pictures.currentValue, this.pictures)) {\n                    this.pictures = changes.pictures.currentValue;\n                    this.control.reset();\n                }\n            }\n\n            this.pictures = this.pictures ? this.pictures : [];\n        }\n\n        public onImageError($event: JQueryEventObject, item: PictureListEditItem): void {\n\n            item.state = PictureListEditStates.Error;\n            item.url = '';\n        }\n\n        public onFocus(): void {\n            this.pipPicturePaste.addPasteListener((item) => {\n                this.readItemLocally(item.url, item.uriData, item.file, item.picture);\n            });\n        }\n\n        public onBlur(): void {\n            this.pipPicturePaste.removePasteListener();\n        }\n\n        public getItems(): PictureListEditItem[] {\n            let items: PictureListEditItem[] = [];\n            let i: number;\n\n            if (this.pictures == null || this.pictures.length == 0) {\n                return items;\n            }\n\n            for (i = 0; i < this.pictures.length; i++) {\n                let newItem: PictureListEditItem = {\n                    pin: this.itemPin++,\n                    id: this.pictures[i].id,\n                    name: this.pictures[i].name,\n                    uri: this.pictures[i].uri,\n                    uriData: null,\n                    uploading: false,\n                    uploaded: false,\n                    progress: 0,\n                    file: null,\n                    url: this.pictures[i].id ? this.pipPictureData.getPictureUrl(this.pictures[i].id) : this.pictures[i].uri,\n                    state: this.pictureStartState\n                };\n                items.push(newItem);\n            }\n\n            return items;\n        }\n\n        public setItems(): void {\n            let i: number;\n\n            // Clean the array\n            if (this.pictures && this.pictures.length > 0) {\n                this.pictures.splice(0, this.pictures.length);\n            }\n            for (i = 0; i < this.control.items.length; i++) {\n                let item = this.control.items[i];\n                if ((item.id || item.uri) && item.state != PictureListEditStates.Deleted) {\n                    let newPic: Attachment = {\n                        id: item.id,\n                        name: item.name,\n                        uri: item.uri\n                    };\n                    this.pictures.push(newPic);\n                }\n            }\n        }\n\n        public reset(): void {\n            if (!this.controlElement) { return }\n            this.control.uploading = 0;\n            this.control.items = this.getItems();\n        }\n\n        private addItem(oldItem: PictureListEditItem, fileInfo: BlobInfo, error: any) {\n            let itemIndex = _.findIndex(this.control.items, { pin: oldItem.pin });\n            if (itemIndex < 0) return;\n            if (error) {\n                this.control.items[itemIndex].uploaded = false;\n                this.control.items[itemIndex].uploading = false;\n                this.control.items[itemIndex].progress = 0;\n                this.control.items[itemIndex].upload = null;\n                this.control.items[itemIndex].state = PictureListEditStates.Error;\n            } else {\n                if (fileInfo) {\n                    this.control.items[itemIndex].id = fileInfo.id;\n                    this.control.items[itemIndex].name = fileInfo.name;\n                    this.control.items[itemIndex].uploaded = true;\n                    this.control.items[itemIndex].state = PictureListEditStates.Original;\n                } else {\n                    this.control.items[itemIndex].uploaded = false;\n                }                \n                this.control.items[itemIndex].uploading = false;\n                this.control.items[itemIndex].uriData = null;\n                this.control.items[itemIndex].progress = 0;\n                this.control.items[itemIndex].upload = null;\n                this.control.items[itemIndex].file = null;\n            }\n        }\n\n        public deleteItem(item: PictureListEditItem, callback?: (data?: any) => void): void {\n            // Avoid double transactions\n            if (item.upload) {\n                item.upload.abort();\n                item.upload = null;\n            }\n\n            if (item.state != PictureListEditStates.Deleted) {\n                return;\n            }\n\n            this.removeItem(item);\n            callback();\n\n        }\n\n        public save(successCallback?: (data: Attachment[]) => void, errorCallback?: (errors?: any) => void): void {\n            let item: PictureListEditItem;\n            let onItemCallback: (error: any) => void;\n            let i: number;\n\n            if (this.control.uploading) {\n                if (errorCallback) {\n                    errorCallback('ERROR_TRANSACTION_IN_PROGRESS');\n                }\n\n                return;\n            }\n\n            this.cancelQuery = null;\n            this.control.error = null;\n            this.control.uploading = 0;\n\n            let addedBlobCollection = [];\n            let addedUrlCollection = [];\n\n            _.each(this.control.items, (item) => {\n                if (item.state == 'added') {\n                    if (item.file) {\n                        addedBlobCollection.push(item);\n                    } else {\n                        addedUrlCollection.push(item);\n                    }\n                }\n            });\n\n\n            let deletedCollection = _.filter(this.control.items, { state: 'deleted' });\n\n            // process addedUrlCollection\n            _.each(addedUrlCollection, (item) => {\n                item.uploaded = true;\n                item.uploading = false;\n                item.progress = 0;\n                item.upload = null;\n                item.uriData = null;\n                item.file = null;\n                item.state = PictureListEditStates.Original;\n            });\n\n            if (!addedBlobCollection.length && !deletedCollection.length) {\n                // do nothing\n                if (addedUrlCollection.length > 0) {\n                    this.setItems();\n                }\n                this.control.uploading = 0;\n                if (successCallback) {\n                    successCallback(this.pictures);\n                }\n\n                return;\n            }\n\n            this.control.uploading = addedBlobCollection.length + deletedCollection.length;\n            async.parallel([\n                (callbackAll) => {\n                    // add documents\n                    _.each(addedBlobCollection, (item) => {\n                        item.uploading = true;\n                        item.progress = 0;\n                    });\n                    this.pipFileUpload.multiUpload(\n                        this.pipPictureData.postPictureUrl(),\n                        addedBlobCollection,\n                        (index: number, data: BlobInfo, err: any) => {\n                            let item = addedBlobCollection[index];\n                            this.addItem(item, data, err);\n                            if (err) {\n                                this.control.error = true;\n                            }\n                        },\n                        (index: number, state: pip.files.FileUploadState, progress: number) => {\n                            // update item progress \n                            let item = addedBlobCollection[index];\n                            item.progress = progress;\n                        },\n                        (error: any, result: any, res: any) => {\n                            // reset upload abort\n                            this.cancelQuery = null;\n                            callbackAll();\n                        },\n                        (cancelQuery: any) => {\n                            this.cancelQuery = cancelQuery;\n                        },\n                        false,\n                        'pin'\n                    );\n                },\n                (callbackAll) => {\n                    // delete documents\n                    if (deletedCollection.length) {\n                        async.each(deletedCollection,\n                            (item, callback) => {\n                                this.deleteItem(item, (error: any) => { callback() });\n                            },\n                            (error, result) => {\n                                callbackAll();\n                            });\n                    } else {\n                        callbackAll();\n                    }\n\n                }\n            ],\n                // optional callback\n                (error, results) => {\n                    if (error && !this.control.error) {\n                        this.control.error = error;\n                    }\n                    if (this.control.error) {\n                        this.control.uploading = 0;\n                        let errors = this.getUploadErors();\n                        if (errorCallback) {\n                            errorCallback(errors);\n                        } else {\n                            this.$log.error(errors);   // eslint-disable-line no-console\n                        }\n                    } else {\n                        this.setItems();\n                        this.control.uploading = 0;\n                        if (successCallback) {\n                            successCallback(this.pictures);\n                        }\n                    }\n                });\n        }\n\n        private getUploadErors(): PictureUploadErrors[] {\n            let errors: PictureUploadErrors[] = [];\n\n            _.each(this.control.items, (item: PictureListEditItem) => {\n                if (item.state == PictureListEditStates.Error || item.state == PictureListEditStates.Error) {\n                    errors.push({\n                        id: item.id,\n                        uri: item.uri,\n                        name: item.name\n                    })\n                }\n            });\n\n            return errors;\n        }\n\n        public abort(): void {\n            let i: number;\n\n            for (i = 0; i < this.control.items.length; i++) {\n                let item: PictureListEditItem = this.control.items[i];\n\n                if (item.uploading) {\n                    if (item.upload) {\n                        item.upload.abort();\n                    }\n                    item.uploaded = false;\n                    item.uploading = false;\n                    item.progress = 0;\n                    item.upload = null;\n                }\n            }\n\n            // abort upload\n            if (this.cancelQuery) {\n                this.cancelQuery.resolve();\n            }\n\n            // Abort transaction\n            this.control.uploading = 0;\n            this.control.error = true;\n        }\n\n        public readItemLocally(url, uriData, file, picture): void {\n            let item: PictureListEditItem = new PictureListEditItem();\n            item.pin = this.itemPin++;\n            item.uploading = false;\n            item.uploaded = false;\n            item.progress = 0;\n\n            if (picture) {\n                item.file = null;\n                item.name = picture.name;\n                item.uri = picture.uri;\n                item.id = picture.id;\n                item.uriData = null;\n                item.url = picture.uri ? picture.uri : picture.id ? this.pipPictureData.getPictureUrl(picture.id) : '';\n                item.state == PictureListEditStates.Copied\n            } else {\n                item.file = file;\n                item.name = file ? file.name : url ? url.split('/').pop() : null;\n                item.url = !file && url ? url : uriData ? uriData : '';\n                item.uri = !file && url ? url : null;\n                item.uriData = uriData;\n                item.id = null;\n                item.state = PictureListEditStates.Added;\n            }\n            this.control.items.push(item);\n            this.onChange();\n        }\n\n        public onSelectClick($files: any): void {\n            let i: number;\n            this.controlElement.focus();\n\n            if ($files == null || $files.length == 0) { return; }\n            for (i = 0; i < $files.length; i++) {\n                let file: any = $files[i];\n\n                if (file.type.indexOf('image') > -1) {\n                    this.readItemLocally('', null, file, null);\n                }\n            }\n        }\n\n        public onDeleteClick(item: PictureListEditItem): void {\n            this.removeItem(item);\n\n            this.onChange();\n        }\n\n        public onKeyDown($event: KeyboardEvent, item: PictureListEditItem): void {\n            if (item) {\n                if ($event.keyCode == 46 || $event.keyCode == 8) {\n                    if (item.state == PictureListEditStates.Added) {\n                        this.removeItem(item);\n                    } else {\n                        item.state = PictureListEditStates.Deleted;\n                    }\n\n                    this.onChange();\n                }\n            } else {\n                if ($event.keyCode == 13 || $event.keyCode == 32) {\n                    // !! Avoid clash with $apply()\n                    setTimeout(() => {\n                        this.controlElement.trigger('click');\n                    }, 0);\n                }\n            }\n        }\n\n        public onImageLoad($event: JQueryEventObject, item: PictureListEditItem): void {\n            setTimeout(() => {\n                let image = $($event.target);\n                let container: any = {};\n                container.clientWidth = 80;\n                container.clientHeight = 80;\n                this.pipPictureUtils.setImageMarginCSS(container, image);\n            }, 250);\n\n            item.loaded = true;\n        }\n\n        // On change event\n        public onChange() {\n            if (this.pipChanged) {\n                this.pipChanged({\n                    $event: { sender: this.control },\n                    $control: this.control\n                });\n            }\n        }\n\n    }\n\n    const PictureListEditComponent: ng.IComponentOptions = {\n        bindings: PictureListEditBindings,\n        templateUrl: 'picture_list_edit/PictureListEdit.html',\n        controller: PictureListEditController\n    }\n\n    angular\n        .module('pipPictureListEdit', ['ui.event', 'pipPicturePaste',\n            'pipFocused', 'angularFileUpload', 'pipPictures.Templates'])\n        .config(ConfigPictureListEditTranslations)\n        .component('pipPictureListEdit', PictureListEditComponent);\n}\n","﻿// import pipPictureUtils\n\nconst ConfigPictureUrlDialogTranslations = (pipTranslateProvider: pip.services.ITranslateProvider) => {\n    pipTranslateProvider.translations('en', {\n        'PICTURE_FROM_WEBLINK': 'Add from web link',\n        'LINK_PICTURE': 'Link to the picture...'\n    });\n    pipTranslateProvider.translations('ru', {\n        'PICTURE_FROM_WEBLINK': 'Добавить из веб ссылки',\n        'LINK_PICTURE': 'Ссылка на изображение...'\n    });\n}\n\nclass PictureUrlDialogController {\n    public url: string = '';\n    public invalid: boolean = true;\n    public theme: string;\n\n    constructor(\n        private $log: ng.ILogService,\n        private $scope: ng.IScope,\n        private $mdDialog: angular.material.IDialogService,\n        private $rootScope: ng.IRootScopeService,\n        private $timeout: ng.ITimeoutService,\n        private $mdMenu,\n        private pipPictureUtils\n    ) {\n        \"ngInject\";\n\n        this.theme = this.$rootScope[pip.themes.ThemeRootVar];\n    }\n\n    public setImageSize(img: any): void {\n        let imageWidth: number = img.width();\n        let imageHeight: number = img.height();\n\n        let cssParams = {};\n\n        if ((imageWidth) > (imageHeight)) {\n            cssParams['width'] = '250px';\n            cssParams['height'] = 'auto';\n        } else {\n            cssParams['width'] = 'auto';\n            cssParams['height'] = '250px';\n        }\n\n        img.css(cssParams);\n    }\n\n    public checkUrl(): void {\n        let img = $(\"img#url_image\")\n            .on('error', () => {\n                this.invalid = true;\n                this.$scope.$apply();\n                \n            })\n            .on('load', (e) => {\n                this.invalid = false;\n                this.setImageSize(img);\n                this.$scope.$apply();\n            })\n            .attr(\"src\", this.url);\n    };\n\n    public onCancelClick(): void {\n        this.$mdDialog.cancel();\n    };\n\n    public onAddClick(): void {\n        this.$mdDialog.hide(this.url);\n    };\n\n}\n\nangular\n    .module('pipPictureUrlDialog')\n    .config(ConfigPictureUrlDialogTranslations)\n    .controller('pipPictureUrlDialogController', PictureUrlDialogController);\n\n","import { IPictureUrlDialogService } from './IPictureUrlDialogService';\n\nclass PictureUrlDialogService implements IPictureUrlDialogService {\n    private _mdDialog: angular.material.IDialogService;\n\n    constructor($mdDialog: angular.material.IDialogService) {\n        this._mdDialog = $mdDialog;\n    }\n\n    public show(successCallback?: (result) => void, cancelCallback?: () => void) {\n        this._mdDialog.show({\n            templateUrl: 'picture_url_dialog/PictureUrlDialog.html',\n            clickOutsideToClose: true,\n            controller: 'pipPictureUrlDialogController',\n            controllerAs: '$ctrl'\n        })\n        .then(\n            (result) => {\n                if (successCallback) {\n                    successCallback(result);\n                }\n            });\n    }\n}\n\nangular\n    .module('pipPictureUrlDialog')\n    .service('pipPictureUrlDialog', PictureUrlDialogService);\n\n","angular\n    .module('pipPictureUrlDialog',\n        ['ngMaterial', 'pipPictures.Templates']);\n\nimport './IPictureUrlDialogService';\nimport './PictureUrlDialogService';\nimport './PictureUrlDialogController';\n\n\nexport * from './IPictureUrlDialogService';\n","// configured Rest resource\nfunction configAvatarResources(pipRestProvider: pip.rest.IRestProvider) {\n    pipRestProvider.registerOperation('avatars', '/api/1.0/avatars/:avatar_id');\n}\n\nangular\n    .module('pipPictures.Rest')\n    .config(configAvatarResources);\n\n\n","// configured Rest resource\nfunction configImageSetResources(pipRestProvider: pip.rest.IRestProvider) {\n    pipRestProvider.registerPagedCollection('imagesets', '/api/1.0/imagesets/:imageset_id',\n        { imageset_id: '@imageset_id' },\n        {\n            page: {method: 'GET', isArray: false},\n            update: { method: 'PUT' }\n        });\n}\n\nangular\n    .module('pipPictures.Rest')\n    .config(configImageSetResources);","// configured Rest resource\nfunction configPictureResources(pipRestProvider: pip.rest.IRestProvider) {\n    pipRestProvider.registerPagedCollection('picture', '/api/1.0/blobs/:picture_id',\n        { blob_id: '@picture_id' },\n        {\n            page: { method: 'GET', isArray: false },\n            update: { method: 'PUT' }\n        });\n    pipRestProvider.registerResource('picturesInfo', '/api/1.0/blobs/:picture_id/info');\n}\n\nangular\n    .module('pipPictures.Rest')\n    .config(configPictureResources);\n\n\n","\n\nangular\n    .module('pipPictures.Rest', []);\n\nimport './PictureResources';\nimport './ImageSetResources';\nimport './AvatarResources';\n","export class imageCssParams {\n    public 'width'?: string;\n    public 'margin-left'?: string;\n    public 'height'?: string;\n    public 'margin-top'?: string;\n}\n\nexport interface IPictureUtilsService {\n    getCollageSchemes(): any;\n    setErrorImageCSS(image: any, params?: imageCssParams): void;\n    setImageMarginCSS($element: any, image: any, params?: imageCssParams): void;\n    setIconMarginCSS(container: any, icon: any): void;\n}\n\nexport interface IPictureUtilsProvider extends ng.IServiceProvider {\n\n}\n\n","export class PicturePaste {\n    private pasteCatcher;\n\n    constructor(\n        private $timeout: ng.ITimeoutService\n    ) {\n        \"ngInject\";\n    }\n\n    public addPasteListener(onPaste) {\n        if (!window['Clipboard']) {\n            if (this.pasteCatcher !== null && this.pasteCatcher !== undefined) {\n                this.removePasteListener();\n            }\n\n            this.pasteCatcher = document.createElement(\"div\");\n\n            // Firefox allows images to be pasted into contenteditable elements\n            this.pasteCatcher.setAttribute(\"contenteditable\", \"true\");\n\n            // We can hide the element and append it to the body,\n            //this.pasteCatcher.style.opacity = 0;\n            $(this.pasteCatcher).css({\n                \"position\": \"absolute\",\n                \"left\": \"-999\",\n                width: \"0\",\n                height: \"0\",\n                \"overflow\": \"hidden\",\n                outline: 0\n            });\n\n            document.body.appendChild(this.pasteCatcher);\n        }\n\n        $(document).on('paste', (event) => {\n            let localEvent;\n            if (event['clipboardData'] == null && event.originalEvent) {\n                localEvent = event.originalEvent;\n            } else {\n                localEvent = event;\n            }\n\n            // Paste for chrome\n            if (localEvent.clipboardData) {\n                var items = localEvent.clipboardData.items;\n\n                _.each(items, (item) => {\n                    if (item.type.indexOf(\"image\") != -1) {\n                        var file = item.getAsFile();\n\n                        var fileReader = new FileReader();\n                        fileReader.onload = (e) => {\n                            this.$timeout(() => {\n                                onPaste({ url: e.target['result'], file: file });\n                            });\n                        };\n                        fileReader.readAsDataURL(file);\n                    }\n                });\n            }\n            // Paste for IE\n            else if (window['clipboardData'] && window['clipboardData'].files) {\n                _.each(window['clipboardData'].files, (file) => {\n                    var fileReader = new FileReader();\n                    fileReader.onload = (e) => {\n                        this.$timeout(() => {\n                            onPaste({ url: e.target['result'], file: file });\n                        });\n                    };\n                    fileReader.readAsDataURL(file);\n                });\n            }\n        });\n\n\n    }\n\n    public removePasteListener() {\n        if (!window['Clipboard']) {\n            if (this.pasteCatcher !== null && this.pasteCatcher !== undefined) {\n                document.body.removeChild(this.pasteCatcher);\n                this.pasteCatcher = null;\n            }\n        }\n        $(document).off('paste');\n    }\n\n}\n\nangular\n    .module('pipPicturePaste', []);\n","import { IPictureUtilsService, IPictureUtilsProvider, imageCssParams } from './IPictureUtils';\n\nlet collageSchemes = [\n    // 1\n    [\n        { flex: 100, fullWidth: true, fullHeight: true }\n    ],\n    // 2\n    [\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 50, fullHeight: true, rightPadding: true },\n                { flex: 50, fullHeight: true, leftPadding: true }\n            ]\n        }\n    ],\n    // 3\n    [\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 33, fullHeight: true, rightPadding: true },\n                { flex: 33, fullHeight: true, leftPadding: true, rightPadding: true },\n                { flex: 33, fullHeight: true, leftPadding: true }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 50, fullHeight: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, leftPadding: true, bottomPadding: true },\n                        { flex: 50, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 70, fullHeight: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 30,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, leftPadding: true, bottomPadding: true },\n                        { flex: 50, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 50, fullWidth: true, bottomPadding: true },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, rightPadding: true, topPadding: true },\n                        { flex: 50, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        }\n    ],\n    // 4\n    [\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 50, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 50, fullWidth: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true },\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 50, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 50, fullWidth: true, leftPadding: true, topPadding: true }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 30, fullWidth: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 70,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true },\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 50, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 50, fullWidth: true, leftPadding: true, topPadding: true }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 100, fullWidth: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 33, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        }\n    ],\n    // 5\n    [\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 33, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 50, fullWidth: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 50, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                                { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true }\n                            ]\n                        },\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 50, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 50, fullWidth: true, leftPadding: true, topPadding: true }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 33, fullWidth: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 67,\n                    fullHeight: true,\n                    children: [\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 50, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                                { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true }\n                            ]\n                        },\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 50, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 50, fullWidth: true, leftPadding: true, topPadding: true }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 100, fullWidth: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 25, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        }\n    ],\n    // 6\n    [\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 33, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 33, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 33, fullWidth: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 67,\n                    fullHeight: true,\n                    children: [\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 50, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                                { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true }\n                            ]\n                        },\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 33, fullWidth: true, leftPadding: true, topPadding: true }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 50, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 25, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        }\n    ],\n    // 7\n    [\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 33, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                        { flex: 33, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 25, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 50, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullHeight: true,\n                    children: [\n                        { flex: 25, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        },\n        {\n            group: true,\n            layout: 'row',\n            flex: 100,\n            fullHeight: true,\n            children: [\n                { flex: 25, fullWidth: true, rightPadding: true },\n                {\n                    group: true,\n                    layout: 'column',\n                    flex: 75,\n                    fullHeight: true,\n                    children: [\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                                { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                                { flex: 33, fullWidth: true, leftPadding: true, bottomPadding: true }\n                            ]\n                        },\n                        {\n                            group: true,\n                            layout: 'row',\n                            flex: 50,\n                            fullHeight: true,\n                            children: [\n                                { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 33, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                                { flex: 33, fullWidth: true, leftPadding: true, topPadding: true }\n                            ]\n                        }\n                    ]\n                }\n            ]\n        }\n    ],\n    // 8\n    [\n        {\n            group: true,\n            layout: 'column',\n            flex: 100,\n            fullHeight: true,\n            fullWidth: true,\n            children: [\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullWidth: true,\n                    children: [\n                        { flex: 25, fullWidth: true, rightPadding: true, bottomPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, bottomPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, bottomPadding: true }\n                    ]\n                },\n                {\n                    group: true,\n                    layout: 'row',\n                    flex: 50,\n                    fullWidth: true,\n                    children: [\n                        { flex: 25, fullWidth: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, rightPadding: true, topPadding: true },\n                        { flex: 25, fullWidth: true, leftPadding: true, topPadding: true }\n                    ]\n                }\n            ]\n        }\n    ]\n];\n\nclass PictureUtils implements IPictureUtilsService {\n\n    constructor() {\n        \"ngInject\";\n    }\n\n    public getCollageSchemes(): any {\n        return collageSchemes;\n    }\n\n    public setErrorImageCSS(image: any, params?: imageCssParams): void {\n        let cssParams: imageCssParams = {\n            'width': '',\n            'margin-left': '',\n            'height': '',\n            'margin-top': ''\n        };\n\n        if (params) {\n            cssParams = _.assign(cssParams, params);\n        }\n        if (image) {\n            image.css(cssParams);\n        }\n    }\n\n    public setImageMarginCSS($element: any, image: any, params?: imageCssParams): void {\n        let containerWidth: number = $element.width ? $element.width() : $element.clientWidth;\n        let containerHeight: number = $element.height ? $element.height() : $element.clientHeight;\n        let imageWidth: number = image[0].naturalWidth || image.width;\n        let imageHeight: number = image[0].naturalHeight || image.height;\n        let margin: number = 0;\n        let cssParams: imageCssParams = {};\n\n        if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\n            margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\n            cssParams['margin-left'] = '' + margin + 'px';\n            cssParams['height'] = '' + containerHeight + 'px';\n            cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px';\n            cssParams['margin-top'] = '';\n        } else {\n            margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\n            cssParams['margin-top'] = '' + margin + 'px';\n            cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px';\n            cssParams['width'] = '' + containerWidth + 'px';\n            cssParams['margin-left'] = '';\n        }\n\n        if (params) {\n            cssParams = _.assign(cssParams, params);\n        }\n\n        image.css(cssParams);\n    }\n\n    public setIconMarginCSS(container: any, icon: any): void {\n        let containerWidth: number = container.clientWidth ? container.clientWidth : container.width;\n        let containerHeight: number = container.clientHeight ? container.clientHeight : container.height;\n        let margin: number = 0;\n        let iconSize: number = containerWidth > containerHeight ? containerHeight : containerWidth;\n\n        var cssParams: imageCssParams = {\n            'width': '' + iconSize + 'px',\n            'margin-left': '',\n            'height': '' + iconSize + 'px',\n            'margin-top': ''\n        };\n\n        if ((containerWidth) > (containerHeight)) {\n            margin = ((containerWidth - containerHeight) / 2);\n            cssParams['margin-left'] = '' + margin + 'px';\n        } else {\n            margin = ((containerHeight - containerWidth) / 2);\n            cssParams['margin-top'] = '' + margin + 'px';\n        }\n\n        icon.css(cssParams);\n    }\n\n}\n\nclass PictureUtilsProvider implements IPictureUtilsProvider {\n    private _service: IPictureUtilsService;\n\n    constructor() { }\n\n    public $get() {\n        \"ngInject\";\n\n        if (this._service == null) {\n            this._service = new PictureUtils();\n        }\n\n        return this._service;\n    }\n}\n\nangular\n    .module('pipPictureUtils', [])\n    .provider('pipPictureUtils', PictureUtilsProvider);\n\n","import './IPictureUtils';\nimport './PictureUtils';\nimport './PicturePaste';\n\nexport * from './IPictureUtils';\nexport * from './PicturePaste';","(function(module) {\ntry {\n  module = angular.module('pipPictures.Templates');\n} catch (e) {\n  module = angular.module('pipPictures.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('add_image/AddImage.html',\n    '<md-menu><ng-transclude class=\"pip-add-image-open-button\" ng-click=\"vm.openMenu($mdOpenMenu)\" xxxng-click=\"vm.ngDisabled() ? \\'\\' : $mdOpenMenu()\"></ng-transclude><md-menu-content width=\"4\"><md-menu-item ng-if=\"vm.option.Upload\"><md-button class=\"layout-row layout-align-start-center\" accept=\"image/*\" ng-keydown=\"vm.onKeyDown($event)\" ng-multiple=\"vm.isMulti()\" ng-file-select=\"\" ng-file-change=\"vm.onFileChange($files)\" ng-click=\"vm.hideMenu()\" ng-file-drop=\"\"><md-icon class=\"text-headline text-grey rm24-flex\" md-svg-icon=\"icons:folder\"></md-icon><span class=\"text-grey\">{{ ::\\'FILE\\' | translate }}</span></md-button></md-menu-item><md-menu-item ng-if=\"vm.option.WebLink\"><md-button class=\"layout-row layout-align-start-center\" ng-click=\"vm.onWebLinkClick()\"><md-icon class=\"text-headline text-grey rm24-flex\" md-svg-icon=\"icons:weblink\"></md-icon><span class=\"text-grey\">{{ ::\\'WEB_LINK\\' | translate }}</span></md-button></md-menu-item><md-menu-item ng-if=\"vm.option.Camera\"><md-button class=\"layout-row layout-align-start-center\" ng-click=\"vm.onCameraClick()\"><md-icon class=\"text-headline text-grey rm24-flex\" md-svg-icon=\"icons:camera\"></md-icon><span class=\"text-grey\">{{ ::\\'CAMERA\\' | translate }}</span></md-button></md-menu-item><md-menu-item ng-if=\"vm.option.Galery\"><md-button class=\"layout-row layout-align-start-center\" ng-click=\"vm.onGalleryClick()\"><md-icon class=\"text-headline text-grey rm24-flex\" md-svg-icon=\"icons:images\"></md-icon><span class=\"text-grey\">{{ ::\\'IMAGE_GALLERY\\' | translate }}</span></md-button></md-menu-item></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipPictures.Templates');\n} catch (e) {\n  module = angular.module('pipPictures.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('camera_dialog/CameraDialog.html',\n    '<md-dialog class=\"pip-dialog pip-picture-dialog pip-camera-dialog layout-column\" md-theme=\"{{$ctrl.theme}}\" ng-show=\"$ctrl.browser != \\'android\\'\" ng-class=\"{\\'pip-android-dialog\\': $ctrl.browser == \\'android\\' || !$ctrl.browser}\"><div class=\"pip-header\"><md-button ng-click=\"$ctrl.onCancelClick()\" class=\"md-icon-button\" aria-label=\"{{ ::\\'CANCEL\\' | translate }}\"><md-icon class=\"text-grey\" md-svg-icon=\"icons:arrow-left\"></md-icon></md-button><h3 class=\"m0 text-title\">{{ ::\\'TAKE_PICTURE\\' | translate }}</h3></div><div class=\"pip-body\"><div class=\"camera-stream\" ng-hide=\"$ctrl.webCamError || $ctrl.browser == \\'android\\'\"></div><div class=\"camera-error\" ng-show=\"$ctrl.webCamError || $ctrl.browser == \\'android\\'\"><span>{{ ::\\'WEB_CAM_ERROR\\' | translate }}</span></div></div><div class=\"pip-footer\"><div class=\"w48\"><md-button ng-click=\"$ctrl.onResetPicture()\" ng-hide=\"!$ctrl.freeze || $ctrl.webCamError\" class=\"md-icon-button\" ng-disabled=\"transaction.busy()\" aria-label=\"{{ ::\\'REMOVE_PICTURE\\' | translate }}\"><md-icon class=\"text-grey\" md-svg-icon=\"icons:refresh\"></md-icon></md-button></div><div class=\"flex\"></div><div class=\"w48\"><md-button ng-click=\"$ctrl.onTakePictureClick()\" ng-hide=\"$ctrl.webCamError\" class=\"md-icon-button\" aria-label=\"{{ ::\\'TAKE_PICTURE\\' | translate }}\"><md-icon class=\"text-grey icon-button\" md-svg-icon=\"icons:{{$ctrl.freeze ? \\'check\\' : \\'camera\\'}}\"></md-icon></md-button></div><div class=\"flex\"></div><div class=\"w48\"><md-button ng-click=\"$ctrl.onCancelClick()\" class=\"md-icon-button\" aria-label=\"{{ ::\\'CANCEL\\' | translate }}\"><md-icon class=\"text-grey\" md-svg-icon=\"icons:cross\"></md-icon></md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipPictures.Templates');\n} catch (e) {\n  module = angular.module('pipPictures.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('gallery_search_dialog/GallerySearchDialog.html',\n    '<md-dialog class=\"pip-dialog pip-gallery-search-dialog pip-picture-dialog layout-column\" md-theme=\"{{ $ctrl.theme }}\"><md-progress-linear ng-show=\"$ctrl.transaction.busy()\" md-mode=\"indeterminate\"></md-progress-linear><md-dialog-content class=\"pip-body lp0 rp0 tp0 pip-scroll flex layout-row\"><div class=\"layout-column layout-align-start-start flex\"><div class=\"pip-header w-stretch layout-column layout-align-start-start\"><h3 class=\"w-stretch text-title m0 bp8\"><md-button class=\"md-icon-button m0\" ng-click=\"$ctrl.onCancelClick()\" aria-label=\"{{ ::\\'CANCEL\\' | translate }}\"><md-icon class=\"text-grey\" md-svg-icon=\"icons:arrow-left\"></md-icon></md-button>{{ ::\\'IMAGE_GALLERY\\' | translate }}</h3><div class=\"w-stretch divider-bottom layout-row layout-start-center\"><input class=\"no-divider rm8 text-subhead1 flex\" ng-disabled=\"$ctrl.transaction.busy()\" ng-model=\"$ctrl.search\" ng-keypress=\"$ctrl.onKeyPress($event)\" placeholder=\"{{ ::\\'SEARCH_PICTURES\\' | translate }}\" type=\"text\" tabindex=\"1\"><md-button class=\"md-icon-button md-icon-button-square p0 pip-search-button md-primary\" ng-click=\"$ctrl.onSearchClick()\" ng-hide=\"$ctrl.optionDefault\" tabindex=\"-1\" aria-label=\"SEARCH\"><md-icon class=\"text-opacity md-primary\" md-svg-icon=\"icons:search-square\"></md-icon></md-button></div></div><div class=\"pip-content flex\" ng-show=\"$ctrl.imagesSearchResult.length > 0\"><div class=\"pip-image-container\" ng-click=\"$ctrl.onImageClick(image)\" ng-repeat=\"image in $ctrl.imagesSearchResult track by $index\" ng-class=\"{\\'checked\\': image.checked}\" tabindex=\"{{ $index + 2 }}\"><pip-picture pip-src=\"image.thumbnail\" pip-default-icon=\"icon-images\" pip-rebind=\"true\"></pip-picture><div class=\"pip-checked-cover\"></div><div class=\"pip-checkbox-backdrop\"><md-checkbox md-no-ink=\"\" ng-model=\"image.checked\" ng-click=\"image.checked = !image.checked\" aria-label=\"CHECKED\"></md-checkbox></div></div></div><div class=\"pip-no-images w-stretch layout-column layout-align-center-center flex\" ng-show=\"$ctrl.imagesSearchResult.length == 0\"><img src=\"images/add_from_image_library.svg\" width=\"200\" height=\"200\"><p class=\"text-secondary opacity-secondary text-center\">{{ ::\\'IMAGE_START_SEARCH\\' | translate }}</p></div></div></md-dialog-content><div class=\"pip-footer\"><md-button ng-click=\"$ctrl.onCancelClick()\" ng-hide=\"$ctrl.transaction.busy()\" aria-label=\"{{ ::\\'CANCEL\\' | translate }}\" tabindex=\"{{ $ctrl.imagesSearchResult.length + 3 }}\"><span class=\"text-grey\">{{ ::\\'CANCEL\\' | translate }}</span></md-button><md-button ng-if=\"transaction.busy()\" ng-click=\"$ctrl.onStopSearchClick()\" class=\"md-raised md-warn m0\" tabindex=\"5\" aria-label=\"ABORT\" pip-test=\"button-cancel\">{{ ::\\'CANCEL\\' | translate }}</md-button><md-button class=\"md-accent\" ng-hide=\"$ctrl.transaction.busy()\" ng-disabled=\"$ctrl.addButtonDisabled()\" ng-click=\"$ctrl.onAddClick()\" aria-label=\"{{ ::\\'ADD\\' | translate }}\" tabindex=\"{{ $ctrl.imagesSearchResult.length + 4 }}\">{{ ::\\'ADD\\' | translate }}</md-button></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipPictures.Templates');\n} catch (e) {\n  module = angular.module('pipPictures.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('picture_edit/PictureEdit.html',\n    '<div class=\"pip-picture-upload pip-picture-drop md-focused\" ng-keydown=\"$ctrl.onKeyDown($event)\" ng-class=\"{\\'pip-picture-error\\': $ctrl.control.state == \\'error\\'}\" tabindex=\"{{ $ctrl.ngDisabled || $ctrl.control.uploading ? -1 : 0 }}\" pip-changed=\"$ctrl.readItemLocally(url, uriData, file, picture)\" ng-disabled=\"$ctrl.ngDisabled\" pip-multi=\"$ctrl.multiUpload\" ng-focus=\"$ctrl.onFocus()\" ng-blur=\"$ctrl.onBlur()\" pip-option=\"$ctrl.option\" pip-add-image=\"\"><div class=\"pip-default-icon\" ng-show=\"$ctrl.empty() || $ctrl.control.state == \\'error\\'\"><md-icon class=\"pip-picture-icon\" md-svg-icon=\"icons:{{ $ctrl.icon }}\"></md-icon></div><div class=\"pip-default-text\" ng-show=\"$ctrl.control.state == \\'error\\'\"><span>{{ $ctrl.errorText | translate }}</span></div><div class=\"pip-default-text\" ng-show=\"$ctrl.empty() && $ctrl.control.state != \\'error\\'\"><span>{{ $ctrl.text | translate }}</span></div><img class=\"pip-picture-image\" ng-src=\"{{ $ctrl.control.url }}\" ng-show=\"!$ctrl.empty() && $ctrl.control.state != \\'error\\'\" ng-class=\"{ \\'pip-image-new\\': $ctrl.isUpdated(), \\'cursor-default\\' : $ctrl.ngDisabled || $ctrl.control.uploading }\" ui-event=\"{ error: \\'$ctrl.onImageError($event)\\', load: \\'$ctrl.onImageLoad($event)\\' }\"><md-button class=\"md-icon-button\" ng-click=\"$ctrl.onDeleteClick($event)\" tabindex=\"-1\" aria-label=\"delete\" ng-hide=\"$ctrl.empty() || $ctrl.ngDisabled\" ng-disabled=\"$ctrl.ngDisabled || $ctrl.control.uploading\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></md-button><md-progress-linear ng-show=\"$ctrl.control.uploading\" ng-value=\"$ctrl.control.progress\"></md-progress-linear></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipPictures.Templates');\n} catch (e) {\n  module = angular.module('pipPictures.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('picture_list_edit/PictureListEdit.html',\n    '<div pip-focused=\"\"><div class=\"pip-picture-upload pointer pip-focusable\" ng-class=\"{\\'pip-picture-error\\': item.state == \\'error\\'}\" ng-keydown=\"$ctrl.onKeyDown($event, item)\" tabindex=\"{{ $ctrl.ngDisabled ? -1 : 0 }}\" ng-repeat=\"item in $ctrl.control.items | filter: $ctrl.filterItem\"><div class=\"pip-default-icon\" ng-hide=\"item.loaded || item.state == \\'error\\'\"><md-icon pip-cancel-drag=\"true\" class=\"pip-picture-icon\" md-svg-icon=\"icons:{{ $ctrl.icon }}\"></md-icon></div><div class=\"pip-default-text\" ng-show=\"$ctrl.control.state == \\'error\\'\"><span>{{ $ctrl.errorText | translate }}</span></div><img ng-src=\"{{ ::item.url }}\" pip-cancel-drag=\"true\" ng-hide=\"item.state == \\'error\\'\" ng-class=\"{ \\'pip-image-new\\': item.state == \\'added\\' }\" ui-event=\"{ error: \\'$ctrl.onImageError($event, item)\\', load: \\'$ctrl.onImageLoad($event, item)\\' }\"><md-button ng-click=\"$ctrl.onDeleteClick(item)\" ng-hide=\"$ctrl.ngDisabled || $ctrl.control.uploading\" ng-disabled=\"$ctrl.ngDisabled || $ctrl.control.uploading\" tabindex=\"-1\" aria-label=\"delete\" class=\"md-icon-button\"><md-icon pip-cancel-drag=\"true\" md-svg-icon=\"icons:cross\"></md-icon></md-button><md-progress-linear md-mode=\"indeterminate\" ng-show=\"item.uploading\" value=\"{{ item.progress }}\"></md-progress-linear></div><button class=\"pip-picture-upload pip-picture-drop pip-focusable\" pip-add-image=\"\" pip-multi=\"true\" ng-focus=\"$ctrl.onFocus()\" ng-blur=\"$ctrl.onBlur()\" pip-changed=\"$ctrl.readItemLocally(url, uriData, file, picture)\" ng-disabled=\"$ctrl.ngDisabled || $ctrl.control.uploading\"><div class=\"pip-default-icon\"><md-icon pip-cancel-drag=\"true\" class=\"pip-picture-icon\" md-svg-icon=\"icons:{{ $ctrl.icon }}\"></md-icon></div><div class=\"pip-default-text\"><span>{{ $ctrl.text | translate }}</span></div></button><div class=\"clearfix\"></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipPictures.Templates');\n} catch (e) {\n  module = angular.module('pipPictures.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('picture_url_dialog/PictureUrlDialog.html',\n    '<md-dialog class=\"pip-dialog pip-picture-url-dialog pip-picture-dialog layout-column\" md-theme=\"{{ $ctrl.theme }}\"><md-dialog-content class=\"pip-body lp0 rp0 tp0 pip-scroll\"><div class=\"pip-header bm16 layout-row layout-align-start-center\"><md-button ng-click=\"$ctrl.onCancelClick()\" class=\"md-icon-button lm0\" aria-label=\"{{ ::\\'CANCEL\\' | translate }}\"><md-icon class=\"text-grey\" md-svg-icon=\"icons:arrow-left\"></md-icon></md-button><h3 class=\"text-title m0\">{{ ::\\'PICTURE_FROM_WEBLINK\\' | translate}}</h3></div><div class=\"pip-content lm6 rm16\"><md-input-container md-no-float=\"\" class=\"w-stretch text-subhead1\"><input type=\"text\" ng-model=\"$ctrl.url\" ng-change=\"$ctrl.checkUrl()\" placeholder=\"{{ ::\\'LINK_PICTURE\\' | translate }}\"></md-input-container><div class=\"w-stretch layout-row layout-align-center-center\" ng-hide=\"$ctrl.invalid\"><img id=\"url_image\"></div><div class=\"pip-no-images layout-row layout-align-center-center\" ng-show=\"$ctrl.invalid\"><md-icon class=\"text-grey\" md-svg-icon=\"icons:images\"></md-icon></div></div></md-dialog-content><div class=\"pip-footer\"><md-button ng-click=\"$ctrl.onCancelClick()\" aria-label=\"{{ ::\\'CANCEL\\' | translate }}\">{{ ::\\'CANCEL\\' | translate }}</md-button><md-button class=\"md-accent\" ng-click=\"$ctrl.onAddClick()\" ng-disabled=\"$ctrl.invalid\" aria-label=\"{{ ::\\'ADD\\' | translate }}\">{{ ::\\'ADD\\' | translate }}</md-button></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-suite-pictures-html.min.js.map\n"]}